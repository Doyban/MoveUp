!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){if(!n.o(e,t))Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){if("undefined"!=typeof Symbol&&Symbol.toStringTag)Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t)e=n(e);if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";(function(e,i){n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return _})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return P})),n.d(t,"g",(function(){return T})),n.d(t,"h",(function(){return E})),n.d(t,"i",(function(){return m})),n.d(t,"j",(function(){return C})),n.d(t,"k",(function(){return u})),n.d(t,"l",(function(){return l})),n.d(t,"m",(function(){return w})),n.d(t,"n",(function(){return d})),n.d(t,"o",(function(){return f})),n.d(t,"p",(function(){return c})),n.d(t,"q",(function(){return h})),n.d(t,"r",(function(){return S})),n.d(t,"s",(function(){return O})),n.d(t,"t",(function(){return p}));const r=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r<128)t[n++]=r;else if(r<2048)t[n++]=r>>6|192,t[n++]=63&r|128;else if(55296==(64512&r)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1)))r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128;else t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,o=s?e[r+1]:0,a=r+2<e.length,u=a?e[r+2]:0,c=t>>2,l=(3&t)<<4|o>>4;let h=(15&o)<<2|u>>6,d=63&u;if(!a)if(d=64,!s)h=64;i.push(n[c],n[l],n[h],n[d])}return i.join("")},encodeString(e,t){if(this.HAS_NATIVE_SUPPORT&&!t)return btoa(e);else return this.encodeByteArray(r(e),t)},decodeString(e,t){if(this.HAS_NATIVE_SUPPORT&&!t)return atob(e);else return function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const o=r<e.length?n[e.charAt(r)]:64;++r;const a=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==o||null==a)throw Error();const u=t<<2|s>>4;if(i.push(u),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)if(this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length)this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e}}},o=function(e){return function(e){const t=r(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(){if("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent)return navigator.userAgent;else return""}function c(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(u())}function l(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function h(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function d(){const e=u();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function f(){return"object"==typeof indexedDB}function p(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{if(r.result.close(),!n)self.indexedDB.deleteDatabase(i);e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}const v=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,g=()=>{try{return v()||(()=>{if(void 0===i||void 0===i.env)return;const e=i.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e);else return})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&a(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: "+e)}},m=()=>{var e;return null===(e=g())||void 0===e?void 0:e.config};class b{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{if(t)this.reject(t);else this.resolve(n);if("function"==typeof e)if(this.promise.catch(()=>{}),1===e.length)e(t);else e(t,n)}}}class y extends Error{constructor(e,t,n){if(super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,y.prototype),Error.captureStackTrace)Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(I,(e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`})}(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`;return new y(i,o,n)}}const I=/\{\$([^}]+)}/g;function w(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function T(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(k(n)&&k(s)){if(!T(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function k(e){return null!==e&&"object"==typeof e}function S(e){const t=[];for(const[n,i]of Object.entries(e))if(Array.isArray(i))i.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))});else t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function O(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}}),t}function E(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function P(e,t){const n=new R(e,t);return n.subscribe.bind(n)}class R{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");if(function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"]))i=e;else i={next:e,error:t,complete:n};if(void 0===i.next)i.next=A;if(void 0===i.error)i.error=A;if(void 0===i.complete)i.complete=A;const r=this.unsubscribeOne.bind(this,this.observers.length);if(this.finalized)this.task.then(()=>{try{if(this.finalError)i.error(this.finalError);else i.complete()}catch(e){}});return this.observers.push(i),r}unsubscribeOne(e){if(void 0!==this.observers&&void 0!==this.observers[e])if(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers)this.onNoObservers(this)}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){if("undefined"!=typeof console&&console.error)console.error(n)}})}close(e){if(!this.finalized){if(this.finalized=!0,void 0!==e)this.finalError=e;this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0})}}}function A(){}function C(e){if(e&&e._delegate)return e._delegate;else return e}}).call(this,n(1),n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){if("object"==typeof window)n=window}e.exports=n},function(e,t){var n,i,r=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{if("function"==typeof setTimeout)n=setTimeout;else n=s}catch(e){n=s}try{if("function"==typeof clearTimeout)i=clearTimeout;else i=o}catch(e){i=o}}();var u,c=[],l=!1,h=-1;function d(){if(l&&u){if(l=!1,u.length)c=u.concat(c);else h=-1;if(c.length)f()}}function f(){if(!l){var e=a(d);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)if(u)u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(c.push(new p(e,t)),1===c.length&&!l)a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t);const i=window.innerHeight*window.devicePixelRatio,r=window.innerWidth*window.devicePixelRatio,s={align:"center",fill:"#ffffff",font:"85px Arial"},o={align:"center",fill:"#ffffff",font:"55px Arial"},a={align:"center",fill:"#ffffff",font:"55px Arial"},u={align:"center",fill:"#ffe53b",font:"120px Arial"},c={align:"center",fill:"#ffffff",font:"75px Arial"},l={align:"center",fill:"#ffffff",font:"45px Arial"},h={align:"center",fill:"#ffffff",font:"16px Arial"},d={align:"center",fill:"#ffffff",font:"18px Arial"},f={align:"center",fill:"#ffffff",font:"70px Arial"},p={align:"center",fill:"#ffffff",font:"40px Arial"};var v=n(0);class g{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}class m{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new v.a;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});if(n)e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;else throw r}else if(i)return null;else throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){if(n===this.normalizeInstanceIdentifier(r))s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);if(s)e(s,i);return()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component)if(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,"[DEFAULT]"===i?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated)try{this.component.onInstanceCreated(this.container,e,n)}catch(r){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){if(this.component)return this.component.multipleInstances?e:"[DEFAULT]";else return e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class b{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){if(this.getProvider(e.name).isComponentSet())this.providers.delete(e.name);this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new m(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const y=[];var _;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(_||(_={}));const I={debug:_.DEBUG,verbose:_.VERBOSE,info:_.INFO,warn:_.WARN,error:_.ERROR,silent:_.SILENT},w=_.INFO,T={[_.DEBUG]:"log",[_.VERBOSE]:"log",[_.INFO]:"info",[_.WARN]:"warn",[_.ERROR]:"error"},k=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),r=T[t];if(r)console[r](`[${i}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class S{constructor(e){this.name=e,this._logLevel=w,this._logHandler=k,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?I[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_.DEBUG,...e),this._logHandler(this,_.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_.VERBOSE,...e),this._logHandler(this,_.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_.INFO,...e),this._logHandler(this,_.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_.WARN,...e),this._logHandler(this,_.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_.ERROR,...e),this._logHandler(this,_.ERROR,...e)}}let O,E;const P=new WeakMap,R=new WeakMap,A=new WeakMap,C=new WeakMap,N=new WeakMap;let D={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return R.get(e);if("objectStoreNames"===t)return e.objectStoreNames||A.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return M(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){if(e instanceof IDBTransaction&&("done"===t||"store"===t))return!0;else return t in e}};function L(e){if(e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype))return function(t,...n){const i=e.call(x(this),t,...n);return A.set(i,t.sort?t.sort():[t]),M(i)};if((E||(E=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e))return function(...t){return e.apply(x(this),t),M(P.get(this))};else return function(...t){return M(e.apply(x(this),t))}}function B(e){if("function"==typeof e)return L(e);if(e instanceof IDBTransaction)!function(e){if(R.has(e))return;const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)});R.set(e,t)}(e);if(t=e,(O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e))return new Proxy(e,D);else return e;var t}function M(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(M(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)});return t.then(t=>{if(t instanceof IDBCursor)P.set(t,e)}).catch(()=>{}),N.set(t,e),t}(e);if(C.has(e))return C.get(e);const t=B(e);if(t!==e)C.set(e,t),N.set(t,e);return t}const x=e=>N.get(e);const U=["get","getKey","getAll","getAllKeys","count"],j=["put","add","delete","clear"],F=new Map;function H(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(F.get(t))return F.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=j.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!U.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,r?"readwrite":"readonly");let o=s.store;if(i)o=o.index(t.shift());return(await Promise.all([o[n](...t),r&&s.done]))[0]};return F.set(t,s),s}D=(e=>({...e,get:(t,n,i)=>H(t,n)||e.get(t,n,i),has:(t,n)=>!!H(t,n)||e.has(t,n)}))(D);class V{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}else return null}).filter(e=>e).join(" ")}}const W="@firebase/app",z=new S("@firebase/app"),J={[W]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},G=new Map,q=new Map;function K(e,t){try{e.container.addComponent(t)}catch(n){z.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function X(e){const t=e.name;if(q.has(t))return z.debug(`There were multiple attempts to register component ${t}.`),!1;q.set(t,e);for(const n of G.values())K(n,e);return!0}function $(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});if(n)n.triggerHeartbeat();return e.container.getProvider(t)}const Y={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Q=new v.b("app","Firebase",Y);class Z{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new g("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Q.create("app-deleted",{appName:this._name})}}function ee(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const i=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!=typeof r||!r)throw Q.create("bad-app-name",{appName:String(r)});if(n||(n=Object(v.i)()),!n)throw Q.create("no-options");const s=G.get(r);if(s)if(Object(v.g)(n,s.options)&&Object(v.g)(i,s.config))return s;else throw Q.create("duplicate-app",{appName:r});const o=new b(r);for(const u of q.values())o.addComponent(u);const a=new Z(n,i,o);return G.set(r,a),a}function te(e,t,n){var i;let r=null!==(i=J[e])&&void 0!==i?i:e;if(n)r+="-"+n;const s=r.match(/\s|\//),o=t.match(/\s|\//);if(!s&&!o)X(new g(r+"-version",()=>({library:r,version:t}),"VERSION"));else{const e=[`Unable to register library "${r}" with version "${t}":`];if(s)e.push(`library name "${r}" contains illegal characters (whitespace or "/")`);if(s&&o)e.push("and");if(o)e.push(`version name "${t}" contains illegal characters (whitespace or "/")`);z.warn(e.join(" "))}}const ne="firebase-heartbeat-store";let ie=null;function re(){if(!ie)ie=function(e,t,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(e,t),a=M(o);if(i)o.addEventListener("upgradeneeded",e=>{i(M(o.result),e.oldVersion,e.newVersion,M(o.transaction))});if(n)o.addEventListener("blocked",()=>n());return a.then(e=>{if(s)e.addEventListener("close",()=>s());if(r)e.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(ne)}}}).catch(e=>{throw Q.create("idb-open",{originalErrorMessage:e.message})});return ie}async function se(e,t){var n;try{const n=(await re()).transaction(ne,"readwrite"),i=n.objectStore(ne);return await i.put(t,oe(e)),n.done}catch(i){if(i instanceof v.c)z.warn(i.message);else{const e=Q.create("idb-set",{originalErrorMessage:null===(n=i)||void 0===n?void 0:n.message});z.warn(e.message)}}}function oe(e){return`${e.name}!${e.options.appId}`}class ae{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ce(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=ue();if(null===this._heartbeatsCache)this._heartbeatsCache=await this._heartbeatsCachePromise;if(this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache)await this._heartbeatsCachePromise;if(null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=ue(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(!e){if(n.push({agent:r.agent,dates:[r.date]}),le(n)>t){n.pop();break}}else if(e.dates.push(r.date),le(n)>t){e.dates.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=Object(v.e)(JSON.stringify({version:2,heartbeats:t}));if(this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0)this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache);else this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);return i}}function ue(){return(new Date).toISOString().substring(0,10)}class ce{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){if(!Object(v.o)())return!1;else return Object(v.t)().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};else{return await async function(e){var t;try{return(await re()).transaction(ne).objectStore(ne).get(oe(e))}catch(n){if(n instanceof v.c)z.warn(n.message);else{const e=Q.create("idb-get",{originalErrorMessage:null===(t=n)||void 0===t?void 0:t.message});z.warn(e.message)}}}(this.app)||{heartbeats:[]}}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return se(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return se(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function le(e){return Object(v.e)(JSON.stringify({version:2,heartbeats:e})).length}var he;he="",X(new g("platform-logger",e=>new V(e),"PRIVATE")),X(new g("heartbeat",e=>new ae(e),"PRIVATE")),te(W,"0.8.3",he),te(W,"0.8.3","esm2017"),te("fire-js","");te("firebase","9.13.0","app");class de extends Phaser.State{constructor(){super()}preload(){this.load.atlasXML("guisheet","./assets/images/yellowSheet.png","./assets/xml/yellowSheet.xml"),this.load.atlasXML("uiicons","./assets/images/sheet_black1x.png","./assets/xml/sheet_black1x.xml"),this.load.audio("background",["./assets/audio/background.mp3","./assets/audio/background.ogg"]),this.load.audio("buttonDown",["./assets/audio/button_down.mp3","./assets/audio/button_down.ogg"]),this.load.audio("buttonHover",["./assets/audio/button_hover.mp3","./assets/audio/button_hover.ogg"]),this.load.audio("buttonJump",["./assets/audio/jump.mp3","./assets/audio/jump.ogg"]),this.load.audio("gameOver",["./assets/audio/game_over.mp3","./assets/audio/game_over.ogg"])}create(){this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.state.start("Preload")}}class fe{constructor(e){this.game=e,this._build()}_build(){if(this.buttonDownMusic=this.game.add.audio("buttonDown",1,!1),this.gameOverMusic=this.game.add.audio("gameOver",1,!1),this.buttonHoverMusic=this.game.add.audio("buttonHover",1,!1),this.transparentBackground=this.game.add.image(0,0,"transparentBackground"),this.transparentBackground.alpha=.7,this.transparentBackground.height=this.game.world.height,this.transparentBackground.width=this.game.world.width,this.gameOverBackground=this.game.add.image(this.game.world.centerX,this.game.world.centerY,"gameOverBackground"),devicePixelRatio>3)this.gameOverBackground.scale.setTo(2,1.8);else if(devicePixelRatio<2.1)this.gameOverBackground.scale.setTo(1.8,1.65);else this.gameOverBackground.scale.setTo(1.8,1.65);this.gameOverBackground.anchor.setTo(.5),this.textY=this.game.world.centerY-this.gameOverBackground.height/2+120,this.createGameOverText(),this.createScoreText(),this.createScoreValueText(),this.createHomeButton(),this.createRetryButton(),this.createShareButton(),this.gameOverBackground.visible=!1,this.transparentBackground.visible=!1}createGameOverText(){let e=s;if(devicePixelRatio<2.1)e=o;this.gameOverText=this.game.add.text(0,0,"Game Over",e),this.gameOverText.anchor.setTo(.5),this.gameOverText.alignIn(this.gameOverBackground,Phaser.TOP_CENTER,0,-50),this.gameOverText.stroke="#627577",this.gameOverText.strokeThickness=8,this.gameOverText.visible=!1}createScoreText(){let e=c;if(devicePixelRatio<2.1)e=l;this.gameScoreText=this.game.add.text(0,0,"Score",e),this.gameScoreText.anchor.setTo(.5),this.gameScoreText.alignTo(this.gameOverText,Phaser.BOTTOM_CENTER,0,50),this.gameScoreText.stroke="#627577",this.gameScoreText.strokeThickness=8,this.gameScoreText.visible=!1}createScoreValueText(){let e=f;if(devicePixelRatio<2.1)e=p;this.gameScoreValueText=this.game.add.text(0,0,"0",e),this.gameScoreValueText.anchor.setTo(.5),this.gameScoreValueText.alignTo(this.gameScoreText,Phaser.BOTTOM_CENTER,0,50),this.gameScoreValueText.stroke="#627577",this.gameScoreValueText.strokeThickness=8,this.gameScoreValueText.visible=!1}createHomeButton(){this.buttonHome=this.game.add.button(0,0,"guisheet",this._onHomeButtonClicked,this,"yellow_button07.png","yellow_button08.png","yellow_button09.png","yellow_button10.png"),this.buttonHome.anchor.setTo(.5),this.buttonHome.alignTo(this.gameOverBackground,Phaser.BOTTOM_RIGHT,-50,-90),this.buttonHome.scale.setTo(2),this.buttonHome.visible=!1,this.buttonHomeIcon=this.game.add.image(this.buttonHome.x,this.buttonHome.y-5,"uiicons","home.png"),this.buttonHomeIcon.anchor.setTo(.5),this.buttonHomeIcon.scale.setTo(1.5),this.buttonHomeIcon.visible=!1}_onHomeButtonClicked(){if(this.gameOverMusic.isPlaying)this.gameOverMusic.stop();if(this.buttonDownMusic.play(),this.game.buttonJump)this.game.buttonJump.destroy();if(this.game.dPad)this.game.dPad.destroy();this.game.state.start("Preload")}createRetryButton(){this.buttonRetry=this.game.add.button(0,0,"guisheet",this._onRetryButtonClicked,this,"yellow_button07.png","yellow_button08.png","yellow_button09.png","yellow_button10.png"),this.buttonRetry.anchor.setTo(.5),this.buttonRetry.alignTo(this.gameOverBackground,Phaser.BOTTOM_LEFT,-50,-90),this.buttonRetry.scale.setTo(2),this.buttonRetry.visible=!1,this.buttonRetryIcon=this.game.add.image(this.buttonRetry.x,this.buttonRetry.y-5,"uiicons","return.png"),this.buttonRetryIcon.anchor.setTo(.5),this.buttonRetryIcon.scale.setTo(1.5),this.buttonRetryIcon.visible=!1}createShareButton(){this.buttonShare=this.game.add.button(0,0,"guisheet",this._onShareButtonClicked,this,"yellow_button07.png","yellow_button08.png","yellow_button09.png","yellow_button10.png"),this.buttonShare.anchor.setTo(.5),this.buttonShare.alignTo(this.gameOverBackground,Phaser.BOTTOM_CENTER,0,-90),this.buttonShare.scale.setTo(2),this.buttonShare.visible=!1,this.buttonShareIcon=this.game.add.image(this.buttonShare.x,this.buttonShare.y-5,"uiicons","share2.png"),this.buttonShareIcon.anchor.setTo(.5),this.buttonShareIcon.scale.setTo(1.5),this.buttonShareIcon.visible=!1}_onRetryButtonClicked(){if(this.gameOverMusic.isPlaying)this.gameOverMusic.stop();if(this.buttonDownMusic.play(),this.game.buttonJump)this.game.buttonJump.destroy();if(this.game.dPad)this.game.dPad.destroy();this.game.isGameOverVisible=!1,this.game.state.restart(),this.gameOverBackground.visible=!1}_onShareButtonClicked(){const e={message:"Play MoveUp!",subject:"My score in MoveUp is "+localStorage.score+"!",files:["www/assets/images/logo.png"],url:"https://doyban.com/moveup"};window.plugins.socialsharing.shareWithOptions(e,()=>{alert("Sharing result successful.")},()=>{alert("Sharing result unsuccessful.")})}showGameOver(e,t=!0){if(!t)return t;this.buttonHome.visible=!0,this.buttonHomeIcon.visible=!0,this.buttonRetry.visible=!0,this.buttonRetryIcon.visible=!0,this.buttonShare.visible=!0,this.buttonShareIcon.visible=!0,this.game.backgroundMusic.stop(),this.game.isGameOverVisible=!0,this.gameOverBackground.visible=!0,this.gameOverMusic.play(),this.gameOverText.visible=!0,this.gameScoreValueText.setText(e,!0),this.gameScoreValueText.visible=!0,this.gameScoreText.visible=!0,this.transparentBackground.visible=!0}}var pe=function(e,t){return(pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]})(e,t)};function ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}pe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ge=function(){return(ge=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])if(Object.prototype.hasOwnProperty.call(t,r))e[r]=t[r];return e}).apply(this,arguments)};function me(e,t){var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0)n[i]=e[i];if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)if(t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r]))n[i[r]]=e[i[r]]}return n}function be(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{u(i.next(e))}catch(t){s(t)}}function a(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))}function ye(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;if(i=0,r)s=[2&s[0],r.value];switch(s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}if(r[2])o.ops.pop();o.trys.pop();continue}s=t.call(e,o)}catch(a){s=[6,a],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}Object.create;function _e(e,t,n){if(n||2===arguments.length)for(var i,r=0,s=t.length;r<s;r++)if(i||!(r in t)){if(!i)i=Array.prototype.slice.call(t,0,r);i[r]=t[r]}return e.concat(i||Array.prototype.slice.call(t))}Object.create;function Ie(e){var t=this;return Promise.all(e.map((function(e){return be(t,void 0,void 0,(function(){return ye(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e];case 1:return[2,{fulfilled:!0,value:t.sent()}];case 2:return[2,{fulfilled:!1,reason:t.sent()}];case 3:return[2]}}))}))})))}var we=function(){function e(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return e._getInstance=function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var i=new e(t);return this.receivers.push(i),i},e.prototype.isListeningto=function(e){return this.eventTarget===e},e.prototype.handleEvent=function(e){return be(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u=this;return ye(this,(function(c){switch(c.label){case 0:if(n=(t=e).data,i=n.eventId,r=n.eventType,s=n.data,!(null==(o=this.handlersMap[r])?void 0:o.size))return[2];else return t.ports[0].postMessage({status:"ack",eventId:i,eventType:r}),[4,Ie(Array.from(o).map((function(e){return be(u,void 0,void 0,(function(){return ye(this,(function(n){return[2,e(t.origin,s)]}))}))})))];case 1:return a=c.sent(),t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:a}),[2]}}))}))},e.prototype._subscribe=function(e,t){if(0===Object.keys(this.handlersMap).length)this.eventTarget.addEventListener("message",this.boundEventHandler);if(!this.handlersMap[e])this.handlersMap[e]=new Set;this.handlersMap[e].add(t)},e.prototype._unsubscribe=function(e,t){if(this.handlersMap[e]&&t)this.handlersMap[e].delete(t);if(!t||0===this.handlersMap[e].size)delete this.handlersMap[e];if(0===Object.keys(this.handlersMap).length)this.eventTarget.removeEventListener("message",this.boundEventHandler)},e.receivers=[],e}();function Te(e,t){if(void 0===e)e="";if(void 0===t)t=10;for(var n="",i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}var ke=function(){function e(e){this.target=e,this.handlers=new Set}return e.prototype.removeMessageHandler=function(e){if(e.messageChannel)e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close();this.handlers.delete(e)},e.prototype._send=function(e,t,n){if(void 0===n)n=50;return be(this,void 0,void 0,(function(){var i,r,s,o=this;return ye(this,(function(a){if(!(i="undefined"!=typeof MessageChannel?new MessageChannel:null))throw new Error("connection_unavailable");return[2,new Promise((function(a,u){var c=Te("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage:function(e){var t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),r=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),a(t.data.response);break;default:clearTimeout(l),clearTimeout(r),u(new Error("invalid_response"))}}},o.handlers.add(s),i.port1.addEventListener("message",s.onMessage),o.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])})).finally((function(){if(s)o.removeMessageHandler(s)}))]}))}))},e}();function Se(){return window}function Oe(){return void 0!==Se().WorkerGlobalScope&&"function"==typeof Se().importScripts}function Ee(){return be(this,void 0,void 0,(function(){return ye(this,(function(e){switch(e.label){case 0:if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return[2,null];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,navigator.serviceWorker.ready];case 2:return[2,e.sent().active];case 3:return e.sent(),[2,null];case 4:return[2]}}))}))}var Pe=function(){function e(e){this.request=e}return e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))},e}();function Re(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function Ae(){var e=indexedDB.deleteDatabase("firebaseLocalStorageDb");return new Pe(e).toPromise()}function Ce(){var e=this,t=indexedDB.open("firebaseLocalStorageDb",1);return new Promise((function(n,i){t.addEventListener("error",(function(){i(t.error)})),t.addEventListener("upgradeneeded",(function(){var e=t.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(n){i(n)}})),t.addEventListener("success",(function(){return be(e,void 0,void 0,(function(){var e,i;return ye(this,(function(r){switch(r.label){case 0:if((e=t.result).objectStoreNames.contains("firebaseLocalStorage"))return[3,3];else return e.close(),[4,Ae()];case 1:return r.sent(),i=n,[4,Ce()];case 2:return i.apply(void 0,[r.sent()]),[3,4];case 3:n(e),r.label=4;case 4:return[2]}}))}))}))}))}function Ne(e,t,n){return be(this,void 0,void 0,(function(){var i,r;return ye(this,(function(s){return i=Re(e,!0).put(((r={}).fbase_key=t,r.value=n,r)),[2,new Pe(i).toPromise()]}))}))}function De(e,t){var n=Re(e,!0).delete(t);return new Pe(n).toPromise()}var Le=function(){function e(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return e.prototype._openDb=function(){return be(this,void 0,void 0,(function(){var e;return ye(this,(function(t){switch(t.label){case 0:if(this.db)return[2,this.db];else return e=this,[4,Ce()];case 1:return e.db=t.sent(),[2,this.db]}}))}))},e.prototype._withRetries=function(e){return be(this,void 0,void 0,(function(){var t,n,i;return ye(this,(function(r){switch(r.label){case 0:t=0,r.label=1;case 1:r.label=2;case 2:return r.trys.push([2,5,,6]),[4,this._openDb()];case 3:return n=r.sent(),[4,e(n)];case 4:return[2,r.sent()];case 5:if(i=r.sent(),t++>3)throw i;if(this.db)this.db.close(),this.db=void 0;return[3,6];case 6:return[3,1];case 7:return[2]}}))}))},e.prototype.initializeServiceWorkerMessaging=function(){return be(this,void 0,void 0,(function(){return ye(this,(function(e){return[2,Oe()?this.initializeReceiver():this.initializeSender()]}))}))},e.prototype.initializeReceiver=function(){return be(this,void 0,void 0,(function(){var e=this;return ye(this,(function(t){return this.receiver=we._getInstance(Oe()?self:null),this.receiver._subscribe("keyChanged",(function(t,n){return be(e,void 0,void 0,(function(){return ye(this,(function(e){switch(e.label){case 0:return[4,this._poll()];case 1:return[2,{keyProcessed:e.sent().includes(n.key)}]}}))}))})),this.receiver._subscribe("ping",(function(t,n){return be(e,void 0,void 0,(function(){return ye(this,(function(e){return[2,["keyChanged"]]}))}))})),[2]}))}))},e.prototype.initializeSender=function(){var e,t;return be(this,void 0,void 0,(function(){var n,i;return ye(this,(function(r){switch(r.label){case 0:return n=this,[4,Ee()];case 1:if(n.activeServiceWorker=r.sent(),!this.activeServiceWorker)return[2];else return this.sender=new ke(this.activeServiceWorker),[4,this.sender._send("ping",{},800)];case 2:if(!(i=r.sent()))return[2];if((null===(e=i[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=i[0])||void 0===t?void 0:t.value.includes("keyChanged")))this.serviceWorkerReceiverAvailable=!0;return[2]}}))}))},e.prototype.notifyServiceWorker=function(e){return be(this,void 0,void 0,(function(){return ye(this,(function(t){switch(t.label){case 0:if(!this.sender||!this.activeServiceWorker||((null===(n=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null)!==this.activeServiceWorker)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)];case 2:case 3:return t.sent(),[3,4];case 4:return[2]}var n}))}))},e.prototype._isAvailable=function(){return be(this,void 0,void 0,(function(){var e;return ye(this,(function(t){switch(t.label){case 0:if(t.trys.push([0,4,,5]),!indexedDB)return[2,!1];else return[4,Ce()];case 1:return[4,Ne(e=t.sent(),"__sak","1")];case 2:return t.sent(),[4,De(e,"__sak")];case 3:return t.sent(),[2,!0];case 4:return t.sent(),[3,5];case 5:return[2,!1]}}))}))},e.prototype._withPendingWrite=function(e){return be(this,void 0,void 0,(function(){return ye(this,(function(t){switch(t.label){case 0:this.pendingWrites++,t.label=1;case 1:return t.trys.push([1,,3,4]),[4,e()];case 2:return t.sent(),[3,4];case 3:return this.pendingWrites--,[7];case 4:return[2]}}))}))},e.prototype._set=function(e,t){return be(this,void 0,void 0,(function(){var n=this;return ye(this,(function(i){return[2,this._withPendingWrite((function(){return be(n,void 0,void 0,(function(){return ye(this,(function(n){switch(n.label){case 0:return[4,this._withRetries((function(n){return Ne(n,e,t)}))];case 1:return n.sent(),this.localCache[e]=t,[2,this.notifyServiceWorker(e)]}}))}))}))]}))}))},e.prototype._get=function(e){return be(this,void 0,void 0,(function(){var t;return ye(this,(function(n){switch(n.label){case 0:return[4,this._withRetries((function(t){return function(e,t){return be(this,void 0,void 0,(function(){var n,i;return ye(this,(function(r){switch(r.label){case 0:return n=Re(e,!1).get(t),[4,new Pe(n).toPromise()];case 1:return[2,void 0===(i=r.sent())?null:i.value]}}))}))}(t,e)}))];case 1:return t=n.sent(),this.localCache[e]=t,[2,t]}}))}))},e.prototype._remove=function(e){return be(this,void 0,void 0,(function(){var t=this;return ye(this,(function(n){return[2,this._withPendingWrite((function(){return be(t,void 0,void 0,(function(){return ye(this,(function(t){switch(t.label){case 0:return[4,this._withRetries((function(t){return De(t,e)}))];case 1:return t.sent(),delete this.localCache[e],[2,this.notifyServiceWorker(e)]}}))}))}))]}))}))},e.prototype._poll=function(){return be(this,void 0,void 0,(function(){var e,t,n,i,r,s,o,a,u,c,l;return ye(this,(function(h){switch(h.label){case 0:return[4,this._withRetries((function(e){var t=Re(e,!1).getAll();return new Pe(t).toPromise()}))];case 1:if(!(e=h.sent()))return[2,[]];if(0!==this.pendingWrites)return[2,[]];for(t=[],n=new Set,i=0,r=e;i<r.length;i++)if(s=r[i],o=s.fbase_key,a=s.value,n.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a))this.notifyListeners(o,a),t.push(o);for(u=0,c=Object.keys(this.localCache);u<c.length;u++)if(l=c[u],this.localCache[l]&&!n.has(l))this.notifyListeners(l,null),t.push(l);return[2,t]}}))}))},e.prototype.notifyListeners=function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var i=0,r=Array.from(n);i<r.length;i++){(0,r[i])(t)}},e.prototype.startPolling=function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){return be(e,void 0,void 0,(function(){return ye(this,(function(e){return[2,this._poll()]}))}))}),800)},e.prototype.stopPolling=function(){if(this.pollTimer)clearInterval(this.pollTimer),this.pollTimer=null},e.prototype._addListener=function(e,t){if(0===Object.keys(this.listeners).length)this.startPolling();if(!this.listeners[e])this.listeners[e]=new Set,this._get(e);this.listeners[e].add(t)},e.prototype._removeListener=function(e,t){if(this.listeners[e])if(this.listeners[e].delete(t),0===this.listeners[e].size)delete this.listeners[e];if(0===Object.keys(this.listeners).length)this.stopPolling()},e.type="LOCAL",e}();function Be(){var e;return(e={})["dependent-sdk-initialized-before-auth"]="Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",e}var Me=Be,xe=new v.b("auth","Firebase",Be()),Ue=new S("@firebase/auth");function je(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Ue.logLevel<=_.ERROR)Ue.error.apply(Ue,_e(["Auth (9.13.0): "+e],t))}function Fe(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];throw ze.apply(void 0,_e([e],t))}function He(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return ze.apply(void 0,_e([e],t))}function Ve(e,t,n){var i,r=ge(ge({},Me()),((i={})[t]=n,i));return new v.b("auth","Firebase",r).create(t,{appName:e.name})}function We(e,t,n){if(!(t instanceof n)){if(n.name!==t.constructor.name)Fe(e,"argument-error");throw Ve(e,"argument-error","Type of "+t.constructor.name+" does not match expected instance.Did you pass a reference from a different Auth SDK?")}}function ze(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if("string"!=typeof e){var r=n[0],s=_e([],n.slice(1));if(s[0])s[0].appName=e.name;return(t=e._errorFactory).create.apply(t,_e([r],s))}return xe.create.apply(xe,_e([e],n))}function Je(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!e)throw ze.apply(void 0,_e([t],n))}function Ge(e){var t="INTERNAL ASSERTION FAILED: "+e;throw je(t),new Error(t)}function qe(e,t){if(!e)Ge(t)}var Ke=new Map;function Xe(e){qe(e instanceof Function,"Expected a class definition");var t=Ke.get(e);if(t)return qe(t instanceof e,"Instance stored in cache mismatched with class"),t;else return t=new e,Ke.set(e,t),t}function $e(){return"http:"===Ye()||"https:"===Ye()}function Ye(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Qe=function(){function e(e,t){this.shortDelay=e,this.longDelay=t,qe(t>e,"Short delay should be less than long delay!"),this.isMobile=Object(v.p)()||Object(v.q)()}return e.prototype.get=function(){if(!function(){if("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&($e()||Object(v.l)()||"connection"in navigator))return navigator.onLine;else return!0}())return Math.min(5e3,this.shortDelay);else return this.isMobile?this.longDelay:this.shortDelay},e}();function Ze(e,t){qe(e.emulator,"Emulator should always be set here");var n=e.emulator.url;if(!t)return n;else return""+n+(t.startsWith("/")?t.slice(1):t)}var et,tt=function(){function e(){}return e.initialize=function(e,t,n){if(this.fetchImpl=e,t)this.headersImpl=t;if(n)this.responseImpl=n},e.fetch=function(){if(this.fetchImpl)return this.fetchImpl;if("undefined"!=typeof self&&"fetch"in self)return self.fetch;else Ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")},e.headers=function(){if(this.headersImpl)return this.headersImpl;if("undefined"!=typeof self&&"Headers"in self)return self.Headers;else Ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")},e.response=function(){if(this.responseImpl)return this.responseImpl;if("undefined"!=typeof self&&"Response"in self)return self.Response;else Ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")},e}(),nt=((et={}).CREDENTIAL_MISMATCH="custom-token-mismatch",et.MISSING_CUSTOM_TOKEN="internal-error",et.INVALID_IDENTIFIER="invalid-email",et.MISSING_CONTINUE_URI="internal-error",et.INVALID_PASSWORD="wrong-password",et.MISSING_PASSWORD="internal-error",et.EMAIL_EXISTS="email-already-in-use",et.PASSWORD_LOGIN_DISABLED="operation-not-allowed",et.INVALID_IDP_RESPONSE="invalid-credential",et.INVALID_PENDING_TOKEN="invalid-credential",et.FEDERATED_USER_ID_ALREADY_LINKED="credential-already-in-use",et.MISSING_REQ_TYPE="internal-error",et.EMAIL_NOT_FOUND="user-not-found",et.RESET_PASSWORD_EXCEED_LIMIT="too-many-requests",et.EXPIRED_OOB_CODE="expired-action-code",et.INVALID_OOB_CODE="invalid-action-code",et.MISSING_OOB_CODE="internal-error",et.CREDENTIAL_TOO_OLD_LOGIN_AGAIN="requires-recent-login",et.INVALID_ID_TOKEN="invalid-user-token",et.TOKEN_EXPIRED="user-token-expired",et.USER_NOT_FOUND="user-token-expired",et.TOO_MANY_ATTEMPTS_TRY_LATER="too-many-requests",et.INVALID_CODE="invalid-verification-code",et.INVALID_SESSION_INFO="invalid-verification-id",et.INVALID_TEMPORARY_PROOF="invalid-credential",et.MISSING_SESSION_INFO="missing-verification-id",et.SESSION_EXPIRED="code-expired",et.MISSING_ANDROID_PACKAGE_NAME="missing-android-pkg-name",et.UNAUTHORIZED_DOMAIN="unauthorized-continue-uri",et.INVALID_OAUTH_CLIENT_ID="invalid-oauth-client-id",et.ADMIN_ONLY_OPERATION="admin-restricted-operation",et.INVALID_MFA_PENDING_CREDENTIAL="invalid-multi-factor-session",et.MFA_ENROLLMENT_NOT_FOUND="multi-factor-info-not-found",et.MISSING_MFA_ENROLLMENT_ID="missing-multi-factor-info",et.MISSING_MFA_PENDING_CREDENTIAL="missing-multi-factor-session",et.SECOND_FACTOR_EXISTS="second-factor-already-in-use",et.SECOND_FACTOR_LIMIT_EXCEEDED="maximum-second-factor-count-exceeded",et.BLOCKING_FUNCTION_ERROR_RESPONSE="internal-error",et),it=new Qe(3e4,6e4);function rt(e,t){if(e.tenantId&&!t.tenantId)return ge(ge({},t),{tenantId:e.tenantId});else return t}function st(e,t,n,i,r){if(void 0===r)r={};return be(this,void 0,void 0,(function(){var s=this;return ye(this,(function(o){return[2,ot(e,r,(function(){return be(s,void 0,void 0,(function(){var r,s,o,a;return ye(this,(function(u){switch(u.label){case 0:if(r={},s={},i)if("GET"===t)s=i;else r={body:JSON.stringify(i)};return o=Object(v.r)(ge({key:e.config.apiKey},s)).slice(1),[4,e._getAdditionalHeaders()];case 1:if((a=u.sent())["Content-Type"]="application/json",e.languageCode)a["X-Firebase-Locale"]=e.languageCode;return[2,tt.fetch()(ut(e,e.config.apiHost,n,o),ge({method:t,headers:a,referrerPolicy:"no-referrer"},r))]}}))}))}))]}))}))}function ot(e,t,n){return be(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,l,h,d;return ye(this,(function(f){switch(f.label){case 0:e._canInitEmulator=!1,i=ge(ge({},nt),t),f.label=1;case 1:return f.trys.push([1,4,,5]),r=new ct(e),[4,Promise.race([n(),r.promise])];case 2:return s=f.sent(),r.clearNetworkTimeout(),[4,s.json()];case 3:if("needConfirmation"in(o=f.sent()))throw lt(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return[2,o];else{if(a=s.ok?o.errorMessage:o.error.message,u=a.split(" : "),c=u[0],l=u[1],"FEDERATED_USER_ID_ALREADY_LINKED"===c)throw lt(e,"credential-already-in-use",o);else if("EMAIL_EXISTS"===c)throw lt(e,"email-already-in-use",o);else if("USER_DISABLED"===c)throw lt(e,"user-disabled",o);if(h=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-"),l)throw Ve(e,h,l);else Fe(e,h)}return[3,5];case 4:if((d=f.sent())instanceof v.c)throw d;return Fe(e,"network-request-failed"),[3,5];case 5:return[2]}}))}))}function at(e,t,n,i,r){if(void 0===r)r={};return be(this,void 0,void 0,(function(){var s;return ye(this,(function(o){switch(o.label){case 0:return[4,st(e,t,n,i,r)];case 1:if("mfaPendingCredential"in(s=o.sent()))Fe(e,"multi-factor-auth-required",{_serverResponse:s});return[2,s]}}))}))}function ut(e,t,n,i){var r=""+t+n+"?"+i;if(!e.config.emulator)return e.config.apiScheme+"://"+r;else return Ze(e.config,r)}var ct=function(){function e(e){var t=this;this.auth=e,this.timer=null,this.promise=new Promise((function(e,n){t.timer=setTimeout((function(){return n(He(t.auth,"network-request-failed"))}),it.get())}))}return e.prototype.clearNetworkTimeout=function(){clearTimeout(this.timer)},e}();function lt(e,t,n){var i={appName:e.name};if(n.email)i.email=n.email;if(n.phoneNumber)i.phoneNumber=n.phoneNumber;var r=He(e,t,i);return r.customData._tokenResponse=n,r}function ht(e,t){return be(this,void 0,void 0,(function(){return ye(this,(function(n){return[2,st(e,"POST","/v1/accounts:delete",t)]}))}))}function dt(e,t){return be(this,void 0,void 0,(function(){return ye(this,(function(n){return[2,st(e,"POST","/v1/accounts:lookup",t)]}))}))}function ft(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function pt(e){return 1e3*Number(e)}function vt(e){var t,n=e.split("."),i=n[0],r=n[1],s=n[2];if(void 0===i||void 0===r||void 0===s)return je("JWT malformed, contained fewer than 3 sections"),null;try{var o=Object(v.d)(r);if(!o)return je("Failed to decode base64 JWT payload"),null;else return JSON.parse(o)}catch(a){return je("Caught error parsing JWT payload as JSON",null===(t=a)||void 0===t?void 0:t.toString()),null}}function gt(e,t,n){if(void 0===n)n=!1;return be(this,void 0,void 0,(function(){var i;return ye(this,(function(r){switch(r.label){case 0:if(n)return[2,t];r.label=1;case 1:return r.trys.push([1,3,,6]),[4,t];case 2:return[2,r.sent()];case 3:if(!((i=r.sent())instanceof v.c&&function(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(i)))return[3,5];if(e.auth.currentUser!==e)return[3,5];else return[4,e.auth.signOut()];case 4:r.sent(),r.label=5;case 5:throw i;case 6:return[2]}}))}))}var mt=function(){function e(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return e.prototype._start=function(){if(!this.isRunning)this.isRunning=!0,this.schedule()},e.prototype._stop=function(){if(this.isRunning)if(this.isRunning=!1,null!==this.timerId)clearTimeout(this.timerId)},e.prototype.getInterval=function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}else{this.errorBackoff=3e4;n=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,n)}},e.prototype.schedule=function(e){var t=this;if(void 0===e)e=!1;if(this.isRunning){var n=this.getInterval(e);this.timerId=setTimeout((function(){return be(t,void 0,void 0,(function(){return ye(this,(function(e){switch(e.label){case 0:return[4,this.iteration()];case 1:return e.sent(),[2]}}))}))}),n)}},e.prototype.iteration=function(){var e;return be(this,void 0,void 0,(function(){var t;return ye(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.user.getIdToken(!0)];case 1:return n.sent(),[3,3];case 2:if(t=n.sent(),"auth/network-request-failed"===(null===(e=t)||void 0===e?void 0:e.code))this.schedule(!0);return[2];case 3:return this.schedule(),[2]}}))}))},e}(),bt=function(){function e(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}return e.prototype._initializeTime=function(){this.lastSignInTime=ft(this.lastLoginAt),this.creationTime=ft(this.createdAt)},e.prototype._copy=function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()},e.prototype.toJSON=function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}},e}();function yt(e){var t;return be(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,l,h;return ye(this,(function(d){switch(d.label){case 0:return n=e.auth,[4,e.getIdToken()];case 1:return i=d.sent(),[4,gt(e,dt(n,{idToken:i}))];case 2:return Je(null==(r=d.sent())?void 0:r.users.length,n,"internal-error"),s=r.users[0],e._notifyReloadListener(s),o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((function(e){var t=e.providerId,n=me(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],f=e.providerData,p=o,a=_e(_e([],f.filter((function(e){return!p.some((function(t){return t.providerId===e.providerId}))}))),p),u=e.isAnonymous,c=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),l=!u?!1:c,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bt(s.createdAt,s.lastLoginAt),isAnonymous:l},Object.assign(e,h),[2]}var f,p}))}))}function _t(e,t){return be(this,void 0,void 0,(function(){var n,i=this;return ye(this,(function(r){switch(r.label){case 0:return[4,ot(e,{},(function(){return be(i,void 0,void 0,(function(){var n,i,r,s,o,a;return ye(this,(function(u){switch(u.label){case 0:return n=Object(v.r)({grant_type:"refresh_token",refresh_token:t}).slice(1),i=e.config,r=i.tokenApiHost,s=i.apiKey,o=ut(e,r,"/v1/token","key="+s),[4,e._getAdditionalHeaders()];case 1:return(a=u.sent())["Content-Type"]="application/x-www-form-urlencoded",[2,tt.fetch()(o,{method:"POST",headers:a,body:n})]}}))}))}))];case 1:return[2,{accessToken:(n=r.sent()).access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}]}}))}))}var It=function(){function e(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Object.defineProperty(e.prototype,"isExpired",{get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4},enumerable:!1,configurable:!0}),e.prototype.updateFromServerResponse=function(e){Je(e.idToken,"internal-error"),Je(void 0!==e.idToken,"internal-error"),Je(void 0!==e.refreshToken,"internal-error");var t,n,i="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):(t=e.idToken,Je(n=vt(t),"internal-error"),Je(void 0!==n.exp,"internal-error"),Je(void 0!==n.iat,"internal-error"),Number(n.exp)-Number(n.iat));this.updateTokensAndExpiration(e.idToken,e.refreshToken,i)},e.prototype.getToken=function(e,t){if(void 0===t)t=!1;return be(this,void 0,void 0,(function(){return ye(this,(function(n){switch(n.label){case 0:if(Je(!this.accessToken||this.refreshToken,e,"user-token-expired"),!t&&this.accessToken&&!this.isExpired)return[2,this.accessToken];if(!this.refreshToken)return[3,2];else return[4,this.refresh(e,this.refreshToken)];case 1:return n.sent(),[2,this.accessToken];case 2:return[2,null]}}))}))},e.prototype.clearRefreshToken=function(){this.refreshToken=null},e.prototype.refresh=function(e,t){return be(this,void 0,void 0,(function(){var n,i,r,s;return ye(this,(function(o){switch(o.label){case 0:return[4,_t(e,t)];case 1:return n=o.sent(),i=n.accessToken,r=n.refreshToken,s=n.expiresIn,this.updateTokensAndExpiration(i,r,Number(s)),[2]}}))}))},e.prototype.updateTokensAndExpiration=function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n},e.fromJSON=function(t,n){var i=n.refreshToken,r=n.accessToken,s=n.expirationTime,o=new e;if(i)Je("string"==typeof i,"internal-error",{appName:t}),o.refreshToken=i;if(r)Je("string"==typeof r,"internal-error",{appName:t}),o.accessToken=r;if(s)Je("number"==typeof s,"internal-error",{appName:t}),o.expirationTime=s;return o},e.prototype.toJSON=function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}},e.prototype._assign=function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime},e.prototype._clone=function(){return Object.assign(new e,this.toJSON())},e.prototype._performRefresh=function(){return Ge("not implemented")},e}();function wt(e,t){Je("string"==typeof e||void 0===e,"internal-error",{appName:t})}var Tt=function(){function e(e){var t=e.uid,n=e.auth,i=e.stsTokenManager,r=me(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?_e([],r.providerData):[],this.metadata=new bt(r.createdAt||void 0,r.lastLoginAt||void 0)}return e.prototype.getIdToken=function(e){return be(this,void 0,void 0,(function(){var t;return ye(this,(function(n){switch(n.label){case 0:return[4,gt(this,this.stsTokenManager.getToken(this.auth,e))];case 1:if(Je(t=n.sent(),this.auth,"internal-error"),this.accessToken===t)return[3,3];else return this.accessToken=t,[4,this.auth._persistUserIfCurrent(this)];case 2:n.sent(),this.auth._notifyListenersIfCurrent(this),n.label=3;case 3:return[2,t]}}))}))},e.prototype.getIdTokenResult=function(e){return function(e,t){if(void 0===t)t=!1;return be(this,void 0,void 0,(function(){var n,i,r,s,o;return ye(this,(function(a){switch(a.label){case 0:return[4,(n=Object(v.j)(e)).getIdToken(t)];case 1:return i=a.sent(),Je((r=vt(i))&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error"),s="object"==typeof r.firebase?r.firebase:void 0,o=null==s?void 0:s.sign_in_provider,[2,{claims:r,token:i,authTime:ft(pt(r.auth_time)),issuedAtTime:ft(pt(r.iat)),expirationTime:ft(pt(r.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}]}}))}))}(this,e)},e.prototype.reload=function(){return function(e){return be(this,void 0,void 0,(function(){var t;return ye(this,(function(n){switch(n.label){case 0:return[4,yt(t=Object(v.j)(e))];case 1:return n.sent(),[4,t.auth._persistUserIfCurrent(t)];case 2:return n.sent(),t.auth._notifyListenersIfCurrent(t),[2]}}))}))}(this)},e.prototype._assign=function(e){if(this!==e)Je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return ge({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager)},e.prototype._clone=function(t){return new e(ge(ge({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))},e.prototype._onReload=function(e){if(Je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo)this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null},e.prototype._notifyReloadListener=function(e){if(this.reloadListener)this.reloadListener(e);else this.reloadUserInfo=e},e.prototype._startProactiveRefresh=function(){this.proactiveRefresh._start()},e.prototype._stopProactiveRefresh=function(){this.proactiveRefresh._stop()},e.prototype._updateTokensIfNecessary=function(e,t){if(void 0===t)t=!1;return be(this,void 0,void 0,(function(){var n;return ye(this,(function(i){switch(i.label){case 0:if(n=!1,e.idToken&&e.idToken!==this.stsTokenManager.accessToken)this.stsTokenManager.updateFromServerResponse(e),n=!0;if(!t)return[3,2];else return[4,yt(this)];case 1:i.sent(),i.label=2;case 2:return[4,this.auth._persistUserIfCurrent(this)];case 3:if(i.sent(),n)this.auth._notifyListenersIfCurrent(this);return[2]}}))}))},e.prototype.delete=function(){return be(this,void 0,void 0,(function(){var e;return ye(this,(function(t){switch(t.label){case 0:return[4,this.getIdToken()];case 1:return e=t.sent(),[4,gt(this,ht(this.auth,{idToken:e}))];case 2:return t.sent(),this.stsTokenManager.clearRefreshToken(),[2,this.auth.signOut()]}}))}))},e.prototype.toJSON=function(){return ge(ge({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return ge({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})},Object.defineProperty(e.prototype,"refreshToken",{get:function(){return this.stsTokenManager.refreshToken||""},enumerable:!1,configurable:!0}),e._fromJSON=function(t,n){var i,r,s,o,a,u,c,l,h=null!==(i=n.displayName)&&void 0!==i?i:void 0,d=null!==(r=n.email)&&void 0!==r?r:void 0,f=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(a=n.tenantId)&&void 0!==a?a:void 0,g=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,b=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,y=n.uid,_=n.emailVerified,I=n.isAnonymous,w=n.providerData,T=n.stsTokenManager;Je(y&&T,t,"internal-error");var k=It.fromJSON(this.name,T);Je("string"==typeof y,t,"internal-error"),wt(h,t.name),wt(d,t.name),Je("boolean"==typeof _,t,"internal-error"),Je("boolean"==typeof I,t,"internal-error"),wt(f,t.name),wt(p,t.name),wt(v,t.name),wt(g,t.name),wt(m,t.name),wt(b,t.name);var S=new e({uid:y,auth:t,email:d,emailVerified:_,displayName:h,isAnonymous:I,photoURL:p,phoneNumber:f,tenantId:v,stsTokenManager:k,createdAt:m,lastLoginAt:b});if(w&&Array.isArray(w))S.providerData=w.map((function(e){return ge({},e)}));if(g)S._redirectEventId=g;return S},e._fromIdTokenResponse=function(t,n,i){if(void 0===i)i=!1;return be(this,void 0,void 0,(function(){var r,s;return ye(this,(function(o){switch(o.label){case 0:return(r=new It).updateFromServerResponse(n),[4,yt(s=new e({uid:n.localId,auth:t,stsTokenManager:r,isAnonymous:i}))];case 1:return o.sent(),[2,s]}}))}))},e}(),kt=function(){function e(){this.type="NONE",this.storage={}}return e.prototype._isAvailable=function(){return be(this,void 0,void 0,(function(){return ye(this,(function(e){return[2,!0]}))}))},e.prototype._set=function(e,t){return be(this,void 0,void 0,(function(){return ye(this,(function(n){return this.storage[e]=t,[2]}))}))},e.prototype._get=function(e){return be(this,void 0,void 0,(function(){var t;return ye(this,(function(n){return[2,void 0===(t=this.storage[e])?null:t]}))}))},e.prototype._remove=function(e){return be(this,void 0,void 0,(function(){return ye(this,(function(t){return delete this.storage[e],[2]}))}))},e.prototype._addListener=function(e,t){},e.prototype._removeListener=function(e,t){},e.type="NONE",e}();function St(e,t,n){return"firebase:"+e+":"+t+":"+n}var Ot=function(){function e(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;var i=this.auth,r=i.config,s=i.name;this.fullUserKey=St(this.userKey,r.apiKey,s),this.fullPersistenceKey=St("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return e.prototype.setCurrentUser=function(e){return this.persistence._set(this.fullUserKey,e.toJSON())},e.prototype.getCurrentUser=function(){return be(this,void 0,void 0,(function(){var e;return ye(this,(function(t){switch(t.label){case 0:return[4,this.persistence._get(this.fullUserKey)];case 1:return[2,(e=t.sent())?Tt._fromJSON(this.auth,e):null]}}))}))},e.prototype.removeCurrentUser=function(){return this.persistence._remove(this.fullUserKey)},e.prototype.savePersistenceForRedirect=function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)},e.prototype.setPersistence=function(e){return be(this,void 0,void 0,(function(){var t;return ye(this,(function(n){switch(n.label){case 0:if(this.persistence===e)return[2];else return[4,this.getCurrentUser()];case 1:return t=n.sent(),[4,this.removeCurrentUser()];case 2:if(n.sent(),this.persistence=e,t)return[2,this.setCurrentUser(t)];else return[2]}}))}))},e.prototype.delete=function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)},e.create=function(t,n,i){if(void 0===i)i="authUser";return be(this,void 0,void 0,(function(){var r,s,o,a,u,c,l,h,d,f,p=this;return ye(this,(function(v){switch(v.label){case 0:if(!n.length)return[2,new e(Xe(kt),t,i)];else return[4,Promise.all(n.map((function(e){return be(p,void 0,void 0,(function(){return ye(this,(function(t){switch(t.label){case 0:return[4,e._isAvailable()];case 1:if(t.sent())return[2,e];else return[2,void 0]}}))}))})))];case 1:r=v.sent().filter((function(e){return e})),s=r[0]||Xe(kt),o=St(i,t.config.apiKey,t.name),a=null,u=0,c=n,v.label=2;case 2:if(!(u<c.length))return[3,7];l=c[u],v.label=3;case 3:return v.trys.push([3,5,,6]),[4,l._get(o)];case 4:if(h=v.sent()){if(d=Tt._fromJSON(t,h),l!==s)a=d;return s=l,[3,7]}return[3,6];case 5:return v.sent(),[3,6];case 6:return u++,[3,2];case 7:if(f=r.filter((function(e){return e._shouldAllowMigration})),!s._shouldAllowMigration||!f.length)return[2,new e(s,t,i)];if(s=f[0],!a)return[3,9];else return[4,s._set(o,a.toJSON())];case 8:v.sent(),v.label=9;case 9:return[4,Promise.all(n.map((function(e){return be(p,void 0,void 0,(function(){return ye(this,(function(t){switch(t.label){case 0:if(e===s)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e._remove(o)];case 2:case 3:return t.sent(),[3,4];case 4:return[2]}}))}))})))];case 10:return v.sent(),[2,new e(s,t,i)]}}))}))},e}();function Et(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";else if(Rt(t))return"IEMobile";else if(t.includes("msie")||t.includes("trident/"))return"IE";else if(t.includes("edge/"))return"Edge";else if(function(e){if(void 0===e)e=Object(v.k)();return/firefox\//i.test(e)}(t))return"Firefox";else if(t.includes("silk/"))return"Silk";else if(Ct(t))return"Blackberry";else if(Nt(t))return"Webos";else if(Pt(t))return"Safari";else if((t.includes("chrome/")||function(e){if(void 0===e)e=Object(v.k)();return/crios\//i.test(e)}(t))&&!t.includes("edge/"))return"Chrome";else if(At(t))return"Android";else{var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Pt(e){if(void 0===e)e=Object(v.k)();var t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Rt(e){if(void 0===e)e=Object(v.k)();return/iemobile/i.test(e)}function At(e){if(void 0===e)e=Object(v.k)();return/android/i.test(e)}function Ct(e){if(void 0===e)e=Object(v.k)();return/blackberry/i.test(e)}function Nt(e){if(void 0===e)e=Object(v.k)();return/webos/i.test(e)}function Dt(e){if(void 0===e)e=Object(v.k)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Lt(e,t){if(void 0===t)t=[];var n;switch(e){case"Browser":n=Et(Object(v.k)());break;case"Worker":n=Et(Object(v.k)())+"-"+e;break;default:n=e}return n+"/JsCore/9.13.0/"+(t.length?t.join(","):"FirebaseCore-web")}var Bt=function(){function e(e){this.auth=e,this.queue=[]}return e.prototype.pushCallback=function(e,t){var n=this,i=function(t){return new Promise((function(n,i){try{n(e(t))}catch(r){i(r)}}))};i.onAbort=t,this.queue.push(i);var r=this.queue.length-1;return function(){n.queue[r]=function(){return Promise.resolve()}}},e.prototype.runMiddleware=function(e){var t;return be(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c;return ye(this,(function(l){switch(l.label){case 0:if(this.auth.currentUser===e)return[2];n=[],l.label=1;case 1:l.trys.push([1,6,,7]),i=0,r=this.queue,l.label=2;case 2:if(!(i<r.length))return[3,5];else return[4,(s=r[i])(e)];case 3:if(l.sent(),s.onAbort)n.push(s.onAbort);l.label=4;case 4:return i++,[3,2];case 5:return[3,7];case 6:for(o=l.sent(),n.reverse(),a=0,u=n;a<u.length;a++){c=u[a];try{c()}catch(h){}}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(t=o)||void 0===t?void 0:t.message});case 7:return[2]}}))}))},e}(),Mt=function(){function e(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ut(this),this.idTokenSubscription=new Ut(this),this.beforeStateQueue=new Bt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}return e.prototype._initializeWithPersistence=function(e,t){var n=this;if(t)this._popupRedirectResolver=Xe(t);return this._initializationPromise=this.queue((function(){return be(n,void 0,void 0,(function(){var n,i,r;return ye(this,(function(s){switch(s.label){case 0:if(this._deleted)return[2];else return n=this,[4,Ot.create(this,e)];case 1:if(n.persistenceManager=s.sent(),this._deleted)return[2];if(!(null===(i=this._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively))return[3,5];s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this._popupRedirectResolver._initialize(this)];case 3:case 4:return s.sent(),[3,5];case 5:return[4,this.initializeCurrentUser(t)];case 6:if(s.sent(),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted)return[2];else return this._isInitialized=!0,[2]}}))}))})),this._initializationPromise},e.prototype._onStorageEvent=function(){return be(this,void 0,void 0,(function(){var e;return ye(this,(function(t){switch(t.label){case 0:if(this._deleted)return[2];else return[4,this.assertedPersistence.getCurrentUser()];case 1:if(e=t.sent(),!this.currentUser&&!e)return[2];if(!this.currentUser||!e||this.currentUser.uid!==e.uid)return[3,3];else return this._currentUser._assign(e),[4,this.currentUser.getIdToken()];case 2:return t.sent(),[2];case 3:return[4,this._updateCurrentUser(e,!0)];case 4:return t.sent(),[2]}}))}))},e.prototype.initializeCurrentUser=function(e){var t;return be(this,void 0,void 0,(function(){var n,i,r,s,o,a,u;return ye(this,(function(c){switch(c.label){case 0:return[4,this.assertedPersistence.getCurrentUser()];case 1:if(n=c.sent(),i=n,r=!1,!e||!this.config.authDomain)return[3,4];else return[4,this.getOrInitRedirectPersistenceManager()];case 2:return c.sent(),s=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null==i?void 0:i._redirectEventId,[4,this.tryRedirectSignIn(e)];case 3:if(a=c.sent(),(!s||s===o)&&(null==a?void 0:a.user))i=a.user,r=!0;c.label=4;case 4:if(!i)return[2,this.directlySetCurrentUser(null)];if(i._redirectEventId)return[3,9];if(!r)return[3,8];c.label=5;case 5:return c.trys.push([5,7,,8]),[4,this.beforeStateQueue.runMiddleware(i)];case 6:return c.sent(),[3,8];case 7:return u=c.sent(),i=n,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(u)})),[3,8];case 8:if(i)return[2,this.reloadAndSetCurrentUserOrClear(i)];else return[2,this.directlySetCurrentUser(null)];case 9:return Je(this._popupRedirectResolver,this,"argument-error"),[4,this.getOrInitRedirectPersistenceManager()];case 10:if(c.sent(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId)return[2,this.directlySetCurrentUser(i)];else return[2,this.reloadAndSetCurrentUserOrClear(i)]}}))}))},e.prototype.tryRedirectSignIn=function(e){return be(this,void 0,void 0,(function(){var t;return ye(this,(function(n){switch(n.label){case 0:t=null,n.label=1;case 1:return n.trys.push([1,3,,5]),[4,this._popupRedirectResolver._completeRedirectFn(this,e,!0)];case 2:return t=n.sent(),[3,5];case 3:return n.sent(),[4,this._setRedirectUser(null)];case 4:return n.sent(),[3,5];case 5:return[2,t]}}))}))},e.prototype.reloadAndSetCurrentUserOrClear=function(e){var t;return be(this,void 0,void 0,(function(){var n;return ye(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,yt(e)];case 1:return i.sent(),[3,3];case 2:if(n=i.sent(),"auth/network-request-failed"!==(null===(t=n)||void 0===t?void 0:t.code))return[2,this.directlySetCurrentUser(null)];else return[3,3];case 3:return[2,this.directlySetCurrentUser(e)]}}))}))},e.prototype.useDeviceLanguage=function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()},e.prototype._delete=function(){return be(this,void 0,void 0,(function(){return ye(this,(function(e){return this._deleted=!0,[2]}))}))},e.prototype.updateCurrentUser=function(e){return be(this,void 0,void 0,(function(){var t;return ye(this,(function(n){if(t=e?Object(v.j)(e):null)Je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token");return[2,this._updateCurrentUser(t&&t._clone(this))]}))}))},e.prototype._updateCurrentUser=function(e,t){if(void 0===t)t=!1;return be(this,void 0,void 0,(function(){var n=this;return ye(this,(function(i){switch(i.label){case 0:if(this._deleted)return[2];if(e)Je(this.tenantId===e.tenantId,this,"tenant-id-mismatch");if(t)return[3,2];else return[4,this.beforeStateQueue.runMiddleware(e)];case 1:i.sent(),i.label=2;case 2:return[2,this.queue((function(){return be(n,void 0,void 0,(function(){return ye(this,(function(t){switch(t.label){case 0:return[4,this.directlySetCurrentUser(e)];case 1:return t.sent(),this.notifyAuthListeners(),[2]}}))}))}))]}}))}))},e.prototype.signOut=function(){return be(this,void 0,void 0,(function(){return ye(this,(function(e){switch(e.label){case 0:return[4,this.beforeStateQueue.runMiddleware(null)];case 1:if(e.sent(),!this.redirectPersistenceManager&&!this._popupRedirectResolver)return[3,3];else return[4,this._setRedirectUser(null)];case 2:e.sent(),e.label=3;case 3:return[2,this._updateCurrentUser(null,!0)]}}))}))},e.prototype.setPersistence=function(e){var t=this;return this.queue((function(){return be(t,void 0,void 0,(function(){return ye(this,(function(t){switch(t.label){case 0:return[4,this.assertedPersistence.setPersistence(Xe(e))];case 1:return t.sent(),[2]}}))}))}))},e.prototype._getPersistence=function(){return this.assertedPersistence.persistence.type},e.prototype._updateErrorMap=function(e){this._errorFactory=new v.b("auth","Firebase",e())},e.prototype.onAuthStateChanged=function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)},e.prototype.beforeAuthStateChanged=function(e,t){return this.beforeStateQueue.pushCallback(e,t)},e.prototype.onIdTokenChanged=function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)},e.prototype.toJSON=function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}},e.prototype._setRedirectUser=function(e,t){return be(this,void 0,void 0,(function(){var n;return ye(this,(function(i){switch(i.label){case 0:return[4,this.getOrInitRedirectPersistenceManager(t)];case 1:return n=i.sent(),[2,null===e?n.removeCurrentUser():n.setCurrentUser(e)]}}))}))},e.prototype.getOrInitRedirectPersistenceManager=function(e){return be(this,void 0,void 0,(function(){var t,n,i;return ye(this,(function(r){switch(r.label){case 0:if(this.redirectPersistenceManager)return[3,3];else return Je(t=e&&Xe(e)||this._popupRedirectResolver,this,"argument-error"),n=this,[4,Ot.create(this,[Xe(t._redirectPersistence)],"redirectUser")];case 1:return n.redirectPersistenceManager=r.sent(),i=this,[4,this.redirectPersistenceManager.getCurrentUser()];case 2:i.redirectUser=r.sent(),r.label=3;case 3:return[2,this.redirectPersistenceManager]}}))}))},e.prototype._redirectUserForId=function(e){var t,n;return be(this,void 0,void 0,(function(){var i=this;return ye(this,(function(r){switch(r.label){case 0:if(!this._isInitialized)return[3,2];else return[4,this.queue((function(){return be(i,void 0,void 0,(function(){return ye(this,(function(e){return[2]}))}))}))];case 1:r.sent(),r.label=2;case 2:if((null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e)return[2,this._currentUser];if((null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e)return[2,this.redirectUser];else return[2,null]}}))}))},e.prototype._persistUserIfCurrent=function(e){return be(this,void 0,void 0,(function(){var t=this;return ye(this,(function(n){if(e===this.currentUser)return[2,this.queue((function(){return be(t,void 0,void 0,(function(){return ye(this,(function(t){return[2,this.directlySetCurrentUser(e)]}))}))}))];else return[2]}))}))},e.prototype._notifyListenersIfCurrent=function(e){if(e===this.currentUser)this.notifyAuthListeners()},e.prototype._key=function(){return this.config.authDomain+":"+this.config.apiKey+":"+this.name},e.prototype._startProactiveRefresh=function(){if(this.isProactiveRefreshEnabled=!0,this.currentUser)this._currentUser._startProactiveRefresh()},e.prototype._stopProactiveRefresh=function(){if(this.isProactiveRefreshEnabled=!1,this.currentUser)this._currentUser._stopProactiveRefresh()},Object.defineProperty(e.prototype,"_currentUser",{get:function(){return this.currentUser},enumerable:!1,configurable:!0}),e.prototype.notifyAuthListeners=function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;if(this.lastNotifiedUid!==n)this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser)}},e.prototype.registerStateListener=function(e,t,n,i){var r=this;if(this._deleted)return function(){};var s="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Je(o,this,"internal-error"),o.then((function(){return s(r.currentUser)})),"function"==typeof t)return e.addObserver(t,n,i);else return e.addObserver(t)},e.prototype.directlySetCurrentUser=function(e){return be(this,void 0,void 0,(function(){return ye(this,(function(t){switch(t.label){case 0:if(this.currentUser&&this.currentUser!==e)this._currentUser._stopProactiveRefresh();if(e&&this.isProactiveRefreshEnabled)e._startProactiveRefresh();if(this.currentUser=e,!e)return[3,2];else return[4,this.assertedPersistence.setCurrentUser(e)];case 1:return t.sent(),[3,4];case 2:return[4,this.assertedPersistence.removeCurrentUser()];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},e.prototype.queue=function(e){return this.operations=this.operations.then(e,e),this.operations},Object.defineProperty(e.prototype,"assertedPersistence",{get:function(){return Je(this.persistenceManager,this,"internal-error"),this.persistenceManager},enumerable:!1,configurable:!0}),e.prototype._logFramework=function(e){if(e&&!this.frameworks.includes(e))this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lt(this.config.clientPlatform,this._getFrameworks())},e.prototype._getFrameworks=function(){return this.frameworks},e.prototype._getAdditionalHeaders=function(){var e;return be(this,void 0,void 0,(function(){var t,n,i;return ye(this,(function(r){switch(r.label){case 0:if((i={})["X-Client-Version"]=this.clientVersion,t=i,this.app.options.appId)t["X-Firebase-gmpid"]=this.app.options.appId;return[4,null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader()];case 1:if(n=r.sent())t["X-Firebase-Client"]=n;return[2,t]}}))}))},e}();function xt(e){return Object(v.j)(e)}var Ut=function(){function e(e){var t=this;this.auth=e,this.observer=null,this.addObserver=Object(v.f)((function(e){return t.observer=e}))}return Object.defineProperty(e.prototype,"next",{get:function(){return Je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)},enumerable:!1,configurable:!0}),e}();var jt=function(){function e(e,t){this.providerId=e,this.signInMethod=t}return e.prototype.toJSON=function(){return Ge("not implemented")},e.prototype._getIdTokenResponse=function(e){return Ge("not implemented")},e.prototype._linkToIdToken=function(e,t){return Ge("not implemented")},e.prototype._getReauthenticationResolver=function(e){return Ge("not implemented")},e}();function Ft(e,t){return be(this,void 0,void 0,(function(){return ye(this,(function(n){return[2,st(e,"POST","/v1/accounts:update",t)]}))}))}function Ht(e,t){return be(this,void 0,void 0,(function(){return ye(this,(function(n){return[2,at(e,"POST","/v1/accounts:signInWithPassword",rt(e,t))]}))}))}function Vt(e,t){return be(this,void 0,void 0,(function(){return ye(this,(function(n){return[2,at(e,"POST","/v1/accounts:signInWithEmailLink",rt(e,t))]}))}))}function Wt(e,t){return be(this,void 0,void 0,(function(){return ye(this,(function(n){return[2,at(e,"POST","/v1/accounts:signInWithEmailLink",rt(e,t))]}))}))}var zt=function(e){function t(t,n,i,r){if(void 0===r)r=null;var s=e.call(this,"password",i)||this;return s._email=t,s._password=n,s._tenantId=r,s}return ve(t,e),t._fromEmailAndPassword=function(e,n){return new t(e,n,"password")},t._fromEmailAndCode=function(e,n,i){if(void 0===i)i=null;return new t(e,n,"emailLink",i)},t.prototype.toJSON=function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}},t.fromJSON=function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password))if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);else if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId);return null},t.prototype._getIdTokenResponse=function(e){return be(this,void 0,void 0,(function(){return ye(this,(function(t){switch(this.signInMethod){case"password":return[2,Ht(e,{returnSecureToken:!0,email:this._email,password:this._password})];case"emailLink":return[2,Vt(e,{email:this._email,oobCode:this._password})];default:Fe(e,"internal-error")}return[2]}))}))},t.prototype._linkToIdToken=function(e,t){return be(this,void 0,void 0,(function(){return ye(this,(function(n){switch(this.signInMethod){case"password":return[2,Ft(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password})];case"emailLink":return[2,Wt(e,{idToken:t,email:this._email,oobCode:this._password})];default:Fe(e,"internal-error")}return[2]}))}))},t.prototype._getReauthenticationResolver=function(e){return this._getIdTokenResponse(e)},t}(jt);function Jt(e,t){return be(this,void 0,void 0,(function(){return ye(this,(function(n){return[2,at(e,"POST","/v1/accounts:signInWithIdp",rt(e,t))]}))}))}var Gt,qt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pendingToken=null,t}return ve(t,e),t._fromParams=function(e){var n=new t(e.providerId,e.signInMethod);if(e.idToken||e.accessToken){if(e.idToken)n.idToken=e.idToken;if(e.accessToken)n.accessToken=e.accessToken;if(e.nonce&&!e.pendingToken)n.nonce=e.nonce;if(e.pendingToken)n.pendingToken=e.pendingToken}else if(e.oauthToken&&e.oauthTokenSecret)n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret;else Fe("argument-error");return n},t.prototype.toJSON=function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}},t.fromJSON=function(e){var n="string"==typeof e?JSON.parse(e):e,i=n.providerId,r=n.signInMethod,s=me(n,["providerId","signInMethod"]);if(!i||!r)return null;var o=new t(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o},t.prototype._getIdTokenResponse=function(e){return Jt(e,this.buildRequest())},t.prototype._linkToIdToken=function(e,t){var n=this.buildRequest();return n.idToken=t,Jt(e,n)},t.prototype._getReauthenticationResolver=function(e){var t=this.buildRequest();return t.autoCreate=!1,Jt(e,t)},t.prototype.buildRequest=function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};if(this.idToken)t.id_token=this.idToken;if(this.accessToken)t.access_token=this.accessToken;if(this.secret)t.oauth_token_secret=this.secret;if(t.providerId=this.providerId,this.nonce&&!this.pendingToken)t.nonce=this.nonce;e.postBody=Object(v.r)(t)}return e},t}(jt);var Kt=((Gt={}).USER_NOT_FOUND="user-not-found",Gt);!function(e){function t(t){var n=e.call(this,"phone","phone")||this;return n.params=t,n}ve(t,e),t._fromVerification=function(e,n){return new t({verificationId:e,verificationCode:n})},t._fromTokenResponse=function(e,n){return new t({phoneNumber:e,temporaryProof:n})},t.prototype._getIdTokenResponse=function(e){return function(e,t){return be(this,void 0,void 0,(function(){return ye(this,(function(n){return[2,at(e,"POST","/v1/accounts:signInWithPhoneNumber",rt(e,t))]}))}))}(e,this._makeVerificationRequest())},t.prototype._linkToIdToken=function(e,t){return function(e,t){return be(this,void 0,void 0,(function(){var n;return ye(this,(function(i){switch(i.label){case 0:return[4,at(e,"POST","/v1/accounts:signInWithPhoneNumber",rt(e,t))];case 1:if((n=i.sent()).temporaryProof)throw lt(e,"account-exists-with-different-credential",n);return[2,n]}}))}))}(e,ge({idToken:t},this._makeVerificationRequest()))},t.prototype._getReauthenticationResolver=function(e){return function(e,t){return be(this,void 0,void 0,(function(){var n;return ye(this,(function(i){return n=ge(ge({},t),{operation:"REAUTH"}),[2,at(e,"POST","/v1/accounts:signInWithPhoneNumber",rt(e,n),Kt)]}))}))}(e,this._makeVerificationRequest())},t.prototype._makeVerificationRequest=function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,i=e.verificationId,r=e.verificationCode;if(t&&n)return{temporaryProof:t,phoneNumber:n};else return{sessionInfo:i,code:r}},t.prototype.toJSON=function(){var e={providerId:this.providerId};if(this.params.phoneNumber)e.phoneNumber=this.params.phoneNumber;if(this.params.temporaryProof)e.temporaryProof=this.params.temporaryProof;if(this.params.verificationCode)e.verificationCode=this.params.verificationCode;if(this.params.verificationId)e.verificationId=this.params.verificationId;return e},t.fromJSON=function(e){if("string"==typeof e)e=JSON.parse(e);var n=e,i=n.verificationId,r=n.verificationCode,s=n.phoneNumber,o=n.temporaryProof;if(!(r||i||s||o))return null;else return new t({verificationId:i,verificationCode:r,phoneNumber:s,temporaryProof:o})}}(jt);var Xt=function(){function e(e){var t,n,i,r,s,o,a=Object(v.s)(Object(v.h)(e)),u=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);Je(u&&c&&l,"argument-error"),this.apiKey=u,this.operation=l,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}return e.parseLink=function(t){var n=function(e){var t=Object(v.s)(Object(v.h)(e)).link,n=t?Object(v.s)(Object(v.h)(t)).deep_link_id:null,i=Object(v.s)(Object(v.h)(e)).deep_link_id;return(i?Object(v.s)(Object(v.h)(i)).link:null)||i||n||t||e}(t);try{return new e(n)}catch(i){return null}},e}();!function(){function e(){this.providerId=e.PROVIDER_ID}e.credential=function(e,t){return zt._fromEmailAndPassword(e,t)},e.credentialWithLink=function(e,t){var n=Xt.parseLink(t);return Je(n,"argument-error"),zt._fromEmailAndCode(e,n.code,n.tenantId)},e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink"}();var $t=function(){function e(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}return e.prototype.setDefaultLanguage=function(e){this.defaultLanguageCode=e},e.prototype.setCustomParameters=function(e){return this.customParameters=e,this},e.prototype.getCustomParameters=function(){return this.customParameters},e}(),Yt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scopes=[],t}return ve(t,e),t.prototype.addScope=function(e){if(!this.scopes.includes(e))this.scopes.push(e);return this},t.prototype.getScopes=function(){return _e([],this.scopes)},t}($t),Qt=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}ve(t,e),t.credentialFromJSON=function(e){var t="string"==typeof e?JSON.parse(e):e;return Je("providerId"in t&&"signInMethod"in t,"argument-error"),qt._fromParams(t)},t.prototype.credential=function(e){return this._credential(ge(ge({},e),{nonce:e.rawNonce}))},t.prototype._credential=function(e){return Je(e.idToken||e.accessToken,"argument-error"),qt._fromParams(ge(ge({},e),{providerId:this.providerId,signInMethod:this.providerId}))},t.credentialFromResult=function(e){return t.oauthCredentialFromTaggedObject(e)},t.credentialFromError=function(e){return t.oauthCredentialFromTaggedObject(e.customData||{})},t.oauthCredentialFromTaggedObject=function(e){var n=e._tokenResponse;if(!n)return null;var i=n,r=i.oauthIdToken,s=i.oauthAccessToken,o=i.oauthTokenSecret,a=i.pendingToken,u=i.nonce,c=i.providerId;if(!(s||o||r||a))return null;if(!c)return null;try{return new t(c)._credential({idToken:r,accessToken:s,nonce:u,pendingToken:a})}catch(l){return null}}}(Yt),function(e){function t(){return e.call(this,"facebook.com")||this}ve(t,e),t.credential=function(e){return qt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.FACEBOOK_SIGN_IN_METHOD,accessToken:e})},t.credentialFromResult=function(e){return t.credentialFromTaggedObject(e)},t.credentialFromError=function(e){return t.credentialFromTaggedObject(e.customData||{})},t.credentialFromTaggedObject=function(e){var n=e._tokenResponse;if(!n||!("oauthAccessToken"in n))return null;if(!n.oauthAccessToken)return null;try{return t.credential(n.oauthAccessToken)}catch(i){return null}},t.FACEBOOK_SIGN_IN_METHOD="facebook.com",t.PROVIDER_ID="facebook.com"}(Yt),function(e){function t(){var t=e.call(this,"google.com")||this;return t.addScope("profile"),t}return ve(t,e),t.credential=function(e,n){return qt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})},t.credentialFromResult=function(e){return t.credentialFromTaggedObject(e)},t.credentialFromError=function(e){return t.credentialFromTaggedObject(e.customData||{})},t.credentialFromTaggedObject=function(e){var n=e._tokenResponse;if(!n)return null;var i=n,r=i.oauthIdToken,s=i.oauthAccessToken;if(!r&&!s)return null;try{return t.credential(r,s)}catch(o){return null}},t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com",t}(Yt)),Zt=(function(e){function t(){return e.call(this,"github.com")||this}ve(t,e),t.credential=function(e){return qt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GITHUB_SIGN_IN_METHOD,accessToken:e})},t.credentialFromResult=function(e){return t.credentialFromTaggedObject(e)},t.credentialFromError=function(e){return t.credentialFromTaggedObject(e.customData||{})},t.credentialFromTaggedObject=function(e){var n=e._tokenResponse;if(!n||!("oauthAccessToken"in n))return null;if(!n.oauthAccessToken)return null;try{return t.credential(n.oauthAccessToken)}catch(i){return null}},t.GITHUB_SIGN_IN_METHOD="github.com",t.PROVIDER_ID="github.com"}(Yt),function(e){function t(t,n){var i=e.call(this,t,t)||this;return i.pendingToken=n,i}return ve(t,e),t.prototype._getIdTokenResponse=function(e){return Jt(e,this.buildRequest())},t.prototype._linkToIdToken=function(e,t){var n=this.buildRequest();return n.idToken=t,Jt(e,n)},t.prototype._getReauthenticationResolver=function(e){var t=this.buildRequest();return t.autoCreate=!1,Jt(e,t)},t.prototype.toJSON=function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}},t.fromJSON=function(e){var n="string"==typeof e?JSON.parse(e):e,i=n.providerId,r=n.signInMethod,s=n.pendingToken;if(!i||!r||!s||i!==r)return null;else return new t(i,s)},t._create=function(e,n){return new t(e,n)},t.prototype.buildRequest=function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}},t}(jt));(function(e){function t(t){return Je(t.startsWith("saml."),"argument-error"),e.call(this,t)||this}ve(t,e),t.credentialFromResult=function(e){return t.samlCredentialFromTaggedObject(e)},t.credentialFromError=function(e){return t.samlCredentialFromTaggedObject(e.customData||{})},t.credentialFromJSON=function(e){var t=Zt.fromJSON(e);return Je(t,"argument-error"),t},t.samlCredentialFromTaggedObject=function(e){var t=e._tokenResponse;if(!t)return null;var n=t,i=n.pendingToken,r=n.providerId;if(!i||!r)return null;try{return Zt._create(r,i)}catch(s){return null}}})($t),function(e){function t(){return e.call(this,"twitter.com")||this}ve(t,e),t.credential=function(e,n){return qt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})},t.credentialFromResult=function(e){return t.credentialFromTaggedObject(e)},t.credentialFromError=function(e){return t.credentialFromTaggedObject(e.customData||{})},t.credentialFromTaggedObject=function(e){var n=e._tokenResponse;if(!n)return null;var i=n,r=i.oauthAccessToken,s=i.oauthTokenSecret;if(!r||!s)return null;try{return t.credential(r,s)}catch(o){return null}},t.TWITTER_SIGN_IN_METHOD="twitter.com",t.PROVIDER_ID="twitter.com"}(Yt);var en=function(){function e(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}return e._fromIdTokenResponse=function(t,n,i,r){if(void 0===r)r=!1;return be(this,void 0,void 0,(function(){var s,o;return ye(this,(function(a){switch(a.label){case 0:return[4,Tt._fromIdTokenResponse(t,i,r)];case 1:return s=a.sent(),o=tn(i),[2,new e({user:s,providerId:o,_tokenResponse:i,operationType:n})]}}))}))},e._forOperation=function(t,n,i){return be(this,void 0,void 0,(function(){var r;return ye(this,(function(s){switch(s.label){case 0:return[4,t._updateTokensIfNecessary(i,!0)];case 1:return s.sent(),r=tn(i),[2,new e({user:t,providerId:r,_tokenResponse:i,operationType:n})]}}))}))},e}();function tn(e){if(e.providerId)return e.providerId;if("phoneNumber"in e)return"phone";else return null}var nn=function(e){function t(n,i,r,s){var o,a=e.call(this,i.code,i.message)||this;return a.operationType=r,a.user=s,Object.setPrototypeOf(a,t.prototype),a.customData={appName:n.name,tenantId:null!==(o=n.tenantId)&&void 0!==o?o:void 0,_serverResponse:i.customData._serverResponse,operationType:r},a}return ve(t,e),t._fromErrorAndOperation=function(e,n,i,r){return new t(e,n,i,r)},t}(v.c);function rn(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if("auth/multi-factor-auth-required"===n.code)throw nn._fromErrorAndOperation(e,n,t,i);throw n}))}function sn(e,t,n){if(void 0===n)n=!1;return be(this,void 0,void 0,(function(){var i,r,s,o,a,u;return ye(this,(function(c){switch(c.label){case 0:return r=gt,s=[e],a=(o=t)._linkToIdToken,u=[e.auth],[4,e.getIdToken()];case 1:return[4,r.apply(void 0,s.concat([a.apply(o,u.concat([c.sent()])),n]))];case 2:return i=c.sent(),[2,en._forOperation(e,"link",i)]}}))}))}function on(e,t,n){var i;if(void 0===n)n=!1;return be(this,void 0,void 0,(function(){var r,s,o,a,u,c;return ye(this,(function(l){switch(l.label){case 0:r=e.auth,s="reauthenticate",l.label=1;case 1:return l.trys.push([1,3,,4]),[4,gt(e,rn(r,s,t,e),n)];case 2:return Je((o=l.sent()).idToken,r,"internal-error"),Je(a=vt(o.idToken),r,"internal-error"),u=a.sub,Je(e.uid===u,r,"user-mismatch"),[2,en._forOperation(e,s,o)];case 3:if(c=l.sent(),"auth/user-not-found"===(null===(i=c)||void 0===i?void 0:i.code))Fe(r,"user-mismatch");throw c;case 4:return[2]}}))}))}function an(e,t,n){if(void 0===n)n=!1;return be(this,void 0,void 0,(function(){var i,r,s;return ye(this,(function(o){switch(o.label){case 0:return[4,rn(e,i="signIn",t)];case 1:return r=o.sent(),[4,en._fromIdTokenResponse(e,i,r)];case 2:if(s=o.sent(),n)return[3,4];else return[4,e._updateCurrentUser(s.user)];case 3:o.sent(),o.label=4;case 4:return[2,s]}}))}))}var un=function(){function e(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}return e._fromServerResponse=function(e,t){if("phoneInfo"in t)return cn._fromServerResponse(e,t);else return Fe(e,"internal-error")},e}(),cn=function(e){function t(t){var n=e.call(this,"phone",t)||this;return n.phoneNumber=t.phoneInfo,n}return ve(t,e),t._fromServerResponse=function(e,n){return new t(n)},t}(un);var ln=function(e,t,n){if(void 0===n)n={};this.isNewUser=e,this.providerId=t,this.profile=n},hn=function(e){function t(t,n,i,r){var s=e.call(this,t,n,i)||this;return s.username=r,s}return ve(t,e),t}(ln);(function(e){function t(t,n){return e.call(this,t,"facebook.com",n)||this}ve(t,e)})(ln),function(e){function t(t,n){return e.call(this,t,"github.com",n,"string"==typeof(null==n?void 0:n.login)?null==n?void 0:n.login:null)||this}ve(t,e)}(hn),function(e){function t(t,n){return e.call(this,t,"google.com",n)||this}ve(t,e)}(ln),function(e){function t(t,n,i){return e.call(this,t,"twitter.com",n,i)||this}ve(t,e)}(hn);var dn=function(){function e(e,t,n){this.type=e,this.credential=t,this.auth=n}return e._fromIdtoken=function(t,n){return new e("enroll",t,n)},e._fromMfaPendingCredential=function(t){return new e("signin",t)},e.prototype.toJSON=function(){var e;return{multiFactorSession:(e={},e["enroll"===this.type?"idToken":"pendingCredential"]=this.credential,e)}},e.fromJSON=function(t){var n,i;if(null==t?void 0:t.multiFactorSession)if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);else if(null===(i=t.multiFactorSession)||void 0===i?void 0:i.idToken)return e._fromIdtoken(t.multiFactorSession.idToken);return null},e}();!function(){function e(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}e._fromError=function(t,n){var i=this,r=xt(t),s=n.customData._serverResponse,o=(s.mfaInfo||[]).map((function(e){return un._fromServerResponse(r,e)}));Je(s.mfaPendingCredential,r,"internal-error");var a=dn._fromMfaPendingCredential(s.mfaPendingCredential);return new e(a,o,(function(e){return be(i,void 0,void 0,(function(){var t,i,o;return ye(this,(function(u){switch(u.label){case 0:return[4,e._process(r,a)];case 1:switch(t=u.sent(),delete s.mfaInfo,delete s.mfaPendingCredential,i=ge(ge({},s),{idToken:t.idToken,refreshToken:t.refreshToken}),n.operationType){case"signIn":return[3,2];case"reauthenticate":return[3,5]}return[3,6];case 2:return[4,en._fromIdTokenResponse(r,n.operationType,i)];case 3:return o=u.sent(),[4,r._updateCurrentUser(o.user)];case 4:return u.sent(),[2,o];case 5:return Je(n.user,r,"internal-error"),[2,en._forOperation(n.user,n.operationType,i)];case 6:Fe(r,"internal-error"),u.label=7;case 7:return[2]}}))}))}))},e.prototype.resolveSignIn=function(e){return be(this,void 0,void 0,(function(){var t;return ye(this,(function(n){return t=e,[2,this.signInResolver(t)]}))}))}}();(function(){function e(e){var t=this;this.user=e,this.enrolledFactors=[],e._onReload((function(n){if(n.mfaInfo)t.enrolledFactors=n.mfaInfo.map((function(t){return un._fromServerResponse(e.auth,t)}))}))}e._fromUser=function(t){return new e(t)},e.prototype.getSession=function(){return be(this,void 0,void 0,(function(){var e,t;return ye(this,(function(n){switch(n.label){case 0:return t=(e=dn)._fromIdtoken,[4,this.user.getIdToken()];case 1:return[2,t.apply(e,[n.sent(),this.user.auth])]}}))}))},e.prototype.enroll=function(e,t){return be(this,void 0,void 0,(function(){var n,i,r;return ye(this,(function(s){switch(s.label){case 0:return n=e,[4,this.getSession()];case 1:return i=s.sent(),[4,gt(this.user,n._process(this.user.auth,i,t))];case 2:return r=s.sent(),[4,this.user._updateTokensIfNecessary(r)];case 3:return s.sent(),[2,this.user.reload()]}}))}))},e.prototype.unenroll=function(e){var t;return be(this,void 0,void 0,(function(){var n,i,r,s;return ye(this,(function(o){switch(o.label){case 0:return n="string"==typeof e?e:e.uid,[4,this.user.getIdToken()];case 1:return i=o.sent(),[4,gt(this.user,(a=this.user.auth,u={idToken:i,mfaEnrollmentId:n},st(a,"POST","/v2/accounts/mfaEnrollment:withdraw",rt(a,u))))];case 2:return r=o.sent(),this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),[4,this.user._updateTokensIfNecessary(r)];case 3:o.sent(),o.label=4;case 4:return o.trys.push([4,6,,7]),[4,this.user.reload()];case 5:return o.sent(),[3,7];case 6:if(s=o.sent(),"auth/user-token-expired"!==(null===(t=s)||void 0===t?void 0:t.code))throw s;return[3,7];case 7:return[2]}var a,u}))}))}})(),new WeakMap;var fn=function(){function e(e){this.auth=e,this.internalListeners=new Map}return e.prototype.getUid=function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null},e.prototype.getToken=function(e){return be(this,void 0,void 0,(function(){return ye(this,(function(t){switch(t.label){case 0:return this.assertAuthConfigured(),[4,this.auth._initializationPromise];case 1:if(t.sent(),!this.auth.currentUser)return[2,null];else return[4,this.auth.currentUser.getIdToken(e)];case 2:return[2,{accessToken:t.sent()}]}}))}))},e.prototype.addAuthTokenListener=function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}},e.prototype.removeAuthTokenListener=function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);if(t)this.internalListeners.delete(e),t(),this.updateProactiveRefresh()},e.prototype.assertAuthConfigured=function(){Je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")},e.prototype.updateProactiveRefresh=function(){if(this.internalListeners.size>0)this.auth._startProactiveRefresh();else this.auth._stopProactiveRefresh()},e}();var pn=function(){function e(e,t){this.storageRetriever=e,this.type=t}return e.prototype._isAvailable=function(){try{if(!this.storage)return Promise.resolve(!1);else return this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}},e.prototype._set=function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()},e.prototype._get=function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)},e.prototype._remove=function(e){return this.storage.removeItem(e),Promise.resolve()},Object.defineProperty(e.prototype,"storage",{get:function(){return this.storageRetriever()},enumerable:!1,configurable:!0}),e}();var vn=function(e){function t(){var t,n=e.call(this,(function(){return window.localStorage}),"LOCAL")||this;return n.boundEventHandler=function(e,t){return n.onStorageEvent(e,t)},n.listeners={},n.localCache={},n.pollTimer=null,n.safariLocalStorageNotSynced=(Pt(t=Object(v.k)())||Dt(t))&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),n.fallbackToPolling=function(e){if(void 0===e)e=Object(v.k)();return Dt(e)||At(e)||Nt(e)||Ct(e)||/windows phone/i.test(e)||Rt(e)}(),n._shouldAllowMigration=!0,n}return ve(t,e),t.prototype.forAllChangedKeys=function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var i=n[t],r=this.storage.getItem(i),s=this.localCache[i];if(r!==s)e(i,s,r)}},t.prototype.onStorageEvent=function(e,t){var n=this;if(void 0===t)t=!1;if(e.key){var i=e.key;if(t)this.detachListener();else this.stopPolling();if(this.safariLocalStorageNotSynced){var r=this.storage.getItem(i);if(e.newValue!==r)if(null!==e.newValue)this.storage.setItem(i,e.newValue);else this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!t)return}var s=function(){var e=n.storage.getItem(i);if(t||n.localCache[i]!==e)n.notifyListeners(i,e)},o=this.storage.getItem(i);if(Object(v.n)()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue)setTimeout(s,10);else s()}else this.forAllChangedKeys((function(e,t,i){n.notifyListeners(e,i)}))},t.prototype.notifyListeners=function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var i=0,r=Array.from(n);i<r.length;i++){(0,r[i])(t?JSON.parse(t):t)}},t.prototype.startPolling=function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,i){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)}))}),1e3)},t.prototype.stopPolling=function(){if(this.pollTimer)clearInterval(this.pollTimer),this.pollTimer=null},t.prototype.attachListener=function(){window.addEventListener("storage",this.boundEventHandler)},t.prototype.detachListener=function(){window.removeEventListener("storage",this.boundEventHandler)},t.prototype._addListener=function(e,t){if(0===Object.keys(this.listeners).length)if(this.fallbackToPolling)this.startPolling();else this.attachListener();if(!this.listeners[e])this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e);this.listeners[e].add(t)},t.prototype._removeListener=function(e,t){if(this.listeners[e])if(this.listeners[e].delete(t),0===this.listeners[e].size)delete this.listeners[e];if(0===Object.keys(this.listeners).length)this.detachListener(),this.stopPolling()},t.prototype._set=function(t,n){return be(this,void 0,void 0,(function(){return ye(this,(function(i){switch(i.label){case 0:return[4,e.prototype._set.call(this,t,n)];case 1:return i.sent(),this.localCache[t]=JSON.stringify(n),[2]}}))}))},t.prototype._get=function(t){return be(this,void 0,void 0,(function(){var n;return ye(this,(function(i){switch(i.label){case 0:return[4,e.prototype._get.call(this,t)];case 1:return n=i.sent(),this.localCache[t]=JSON.stringify(n),[2,n]}}))}))},t.prototype._remove=function(t){return be(this,void 0,void 0,(function(){return ye(this,(function(n){switch(n.label){case 0:return[4,e.prototype._remove.call(this,t)];case 1:return n.sent(),delete this.localCache[t],[2]}}))}))},t.type="LOCAL",t}(pn),gn=function(e){function t(){return e.call(this,(function(){return window.sessionStorage}),"SESSION")||this}return ve(t,e),t.prototype._addListener=function(e,t){},t.prototype._removeListener=function(e,t){},t.type="SESSION",t}(pn);function mn(e,t){if(t)return Xe(t);else return Je(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver}var bn=function(e){function t(t){var n=e.call(this,"custom","custom")||this;return n.params=t,n}return ve(t,e),t.prototype._getIdTokenResponse=function(e){return Jt(e,this._buildIdpRequest())},t.prototype._linkToIdToken=function(e,t){return Jt(e,this._buildIdpRequest(t))},t.prototype._getReauthenticationResolver=function(e){return Jt(e,this._buildIdpRequest())},t.prototype._buildIdpRequest=function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};if(e)t.idToken=e;return t},t}(jt);function yn(e){return an(e.auth,new bn(e),e.bypassAuthState)}function _n(e){var t=e.auth,n=e.user;return Je(n,t,"internal-error"),on(n,new bn(e),e.bypassAuthState)}function In(e){return be(this,void 0,void 0,(function(){var t,n;return ye(this,(function(i){return t=e.auth,Je(n=e.user,t,"internal-error"),[2,sn(n,new bn(e),e.bypassAuthState)]}))}))}var wn=function(){function e(e,t,n,i,r){if(void 0===r)r=!1;this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}return e.prototype.execute=function(){var e=this;return new Promise((function(t,n){return be(e,void 0,void 0,(function(){var e,i;return ye(this,(function(r){switch(r.label){case 0:this.pendingPromise={resolve:t,reject:n},r.label=1;case 1:return r.trys.push([1,4,,5]),e=this,[4,this.resolver._initialize(this.auth)];case 2:return e.eventManager=r.sent(),[4,this.onExecution()];case 3:return r.sent(),this.eventManager.registerConsumer(this),[3,5];case 4:return i=r.sent(),this.reject(i),[3,5];case 5:return[2]}}))}))}))},e.prototype.onAuthEvent=function(e){return be(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c;return ye(this,(function(l){switch(l.label){case 0:if(t=e.urlResponse,n=e.sessionId,i=e.postBody,r=e.tenantId,s=e.error,o=e.type,s)return this.reject(s),[2];a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},l.label=1;case 1:return l.trys.push([1,3,,4]),u=this.resolve,[4,this.getIdpTask(o)(a)];case 2:return u.apply(this,[l.sent()]),[3,4];case 3:return c=l.sent(),this.reject(c),[3,4];case 4:return[2]}}))}))},e.prototype.onError=function(e){this.reject(e)},e.prototype.getIdpTask=function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yn;case"linkViaPopup":case"linkViaRedirect":return In;case"reauthViaPopup":case"reauthViaRedirect":return _n;default:Fe(this.auth,"internal-error")}},e.prototype.resolve=function(e){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()},e.prototype.reject=function(e){qe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()},e.prototype.unregisterAndCleanUp=function(){if(this.eventManager)this.eventManager.unregisterConsumer(this);this.pendingPromise=null,this.cleanUp()},e}(),Tn=new Map,kn=function(e){function t(t,n,i){if(void 0===i)i=!1;var r=e.call(this,t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i)||this;return r.eventId=null,r}return ve(t,e),t.prototype.execute=function(){return be(this,void 0,void 0,(function(){var t,n,i,r;return ye(this,(function(s){switch(s.label){case 0:if(t=Tn.get(this.auth._key()))return[3,8];s.label=1;case 1:return s.trys.push([1,6,,7]),[4,Sn(this.resolver,this.auth)];case 2:if(!s.sent())return[3,4];else return[4,e.prototype.execute.call(this)];case 3:return i=s.sent(),[3,5];case 4:i=null,s.label=5;case 5:return n=i,t=function(){return Promise.resolve(n)},[3,7];case 6:return r=s.sent(),t=function(){return Promise.reject(r)},[3,7];case 7:Tn.set(this.auth._key(),t),s.label=8;case 8:if(!this.bypassAuthState)Tn.set(this.auth._key(),(function(){return Promise.resolve(null)}));return[2,t()]}}))}))},t.prototype.onAuthEvent=function(t){return be(this,void 0,void 0,(function(){var n;return ye(this,(function(i){switch(i.label){case 0:if("signInViaRedirect"===t.type)return[2,e.prototype.onAuthEvent.call(this,t)];else if("unknown"===t.type)return this.resolve(null),[2];if(!t.eventId)return[3,2];else return[4,this.auth._redirectUserForId(t.eventId)];case 1:if(n=i.sent())return this.user=n,[2,e.prototype.onAuthEvent.call(this,t)];else this.resolve(null);i.label=2;case 2:return[2]}}))}))},t.prototype.onExecution=function(){return be(this,void 0,void 0,(function(){return ye(this,(function(e){return[2]}))}))},t.prototype.cleanUp=function(){},t}(wn);function Sn(e,t){return be(this,void 0,void 0,(function(){var n,i,r;return ye(this,(function(s){switch(s.label){case 0:return n=Rn(t),[4,(i=Pn(e))._isAvailable()];case 1:if(!s.sent())return[2,!1];else return[4,i._get(n)];case 2:return r="true"===s.sent(),[4,i._remove(n)];case 3:return s.sent(),[2,r]}}))}))}function On(e,t){return be(this,void 0,void 0,(function(){return ye(this,(function(n){return[2,Pn(e)._set(Rn(t),"true")]}))}))}function En(e,t){Tn.set(e._key(),t)}function Pn(e){return Xe(e._redirectPersistence)}function Rn(e){return St("pendingRedirect",e.config.apiKey,e.name)}function An(e,t,n){return be(this,void 0,void 0,(function(){var i,r;return ye(this,(function(s){switch(s.label){case 0:return i=xt(e),We(e,t,$t),[4,On(r=mn(i,n),i)];case 1:return s.sent(),[2,r._openRedirect(i,t,"signInViaRedirect")]}}))}))}function Cn(e,t,n){if(void 0===n)n=!1;return be(this,void 0,void 0,(function(){var i,r,s;return ye(this,(function(o){switch(o.label){case 0:return i=xt(e),r=mn(i,t),[4,new kn(i,r,n).execute()];case 1:if(!(s=o.sent())||n)return[3,4];else return delete s.user._redirectEventId,[4,i._persistUserIfCurrent(s.user)];case 2:return o.sent(),[4,i._setRedirectUser(null,t)];case 3:o.sent(),o.label=4;case 4:return[2,s]}}))}))}function Nn(e,t,n,i,r,s){Je(e.config.authDomain,e,"auth-domain-config-required"),Je(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:"9.13.0",eventId:r};if(t instanceof $t){if(t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",!Object(v.m)(t.getCustomParameters()))o.customParameters=JSON.stringify(t.getCustomParameters());for(var a=0,u=Object.entries(s||{});a<u.length;a++){var c=u[a],l=c[0],h=c[1];o[l]=h}}if(t instanceof Yt){var d=t.getScopes().filter((function(e){return""!==e}));if(d.length>0)o.scopes=d.join(",")}if(e.tenantId)o.tid=e.tenantId;for(var f=o,p=0,g=Object.keys(f);p<g.length;p++){if(void 0===f[l=g[p]])delete f[l]}return function(e){var t=e.config;if(!t.emulator)return"https://"+t.authDomain+"/__/auth/handler";return Ze(t,"emulator/auth/handler")}(e)+"?"+Object(v.r)(f).slice(1)}function Dn(){return window}function Ln(e,t){if(void 0===t)t={};return be(this,void 0,void 0,(function(){return ye(this,(function(n){return[2,st(e,"GET","/v1/projects",t)]}))}))}function Bn(e,t,n){var i;return be(this,void 0,void 0,(function(){var r,s,o;return ye(this,(function(a){switch(a.label){case 0:return r=Dn().BuildInfo,qe(t.sessionId,"AuthEvent did not contain a session ID"),[4,Un(t.sessionId)];case 1:if(s=a.sent(),o={},Dt())o.ibi=r.packageName;else if(At())o.apn=r.packageName;else Fe(e,"operation-not-supported-in-this-environment");if(r.displayName)o.appDisplayName=r.displayName;return o.sessionId=s,[2,Nn(e,n,t.type,void 0,null!==(i=t.eventId)&&void 0!==i?i:void 0,o)]}}))}))}function Mn(e){var t=Dn().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(i){var r=null;if(i)t.plugins.browsertab.openUrl(e);else r=t.InAppBrowser.open(e,function(e){if(void 0===e)e=Object(v.k)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes");n(r)}))}))}function xn(e,t,n){return be(this,void 0,void 0,(function(){var i,r;return ye(this,(function(s){switch(s.label){case 0:i=Dn().cordova,r=function(){},s.label=1;case 1:return s.trys.push([1,,3,4]),[4,new Promise((function(s,o){var a=null;function u(){var e;s();var t=null===(e=i.plugins.browsertab)||void 0===e?void 0:e.close;if("function"==typeof t)t();if("function"==typeof(null==n?void 0:n.close))n.close()}function c(){if(!a)a=window.setTimeout((function(){o(He(e,"redirect-cancelled-by-user"))}),2e3)}function l(){if("visible"===(null===document||void 0===document?void 0:document.visibilityState))c()}if(t.addPassiveListener(u),document.addEventListener("resume",c,!1),At())document.addEventListener("visibilitychange",l,!1);r=function(){if(t.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),a)window.clearTimeout(a)}}))];case 2:return s.sent(),[3,4];case 3:return r(),[7];case 4:return[2]}}))}))}function Un(e){return be(this,void 0,void 0,(function(){var t,n;return ye(this,(function(i){switch(i.label){case 0:return t=function(e){if(qe(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(e),[4,crypto.subtle.digest("SHA-256",t)];case 1:return n=i.sent(),[2,Array.from(new Uint8Array(n)).map((function(e){return e.toString(16).padStart(2,"0")})).join("")]}}))}))}var jn=function(){function e(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return e.prototype.registerConsumer=function(e){if(this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e))this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null},e.prototype.unregisterConsumer=function(e){this.consumers.delete(e)},e.prototype.onEvent=function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;if(this.consumers.forEach((function(i){if(t.isEventForConsumer(e,i))n=!0,t.sendToConsumer(e,i),t.saveEventToCache(e)})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hn(e);default:return!1}}(e))return n;if(this.hasHandledPotentialRedirect=!0,!n)this.queuedRedirectEvent=e,n=!0;return n},e.prototype.sendToConsumer=function(e,t){var n;if(e.error&&!Hn(e)){var i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(He(this.auth,i))}else t.onAuthEvent(e)},e.prototype.isEventForConsumer=function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n},e.prototype.hasEventBeenHandled=function(e){if(Date.now()-this.lastProcessedEventTime>=6e5)this.cachedEventUids.clear();return this.cachedEventUids.has(Fn(e))},e.prototype.saveEventToCache=function(e){this.cachedEventUids.add(Fn(e)),this.lastProcessedEventTime=Date.now()},e}();function Fn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Hn(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}var Vn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.passiveListeners=new Set,t.initPromise=new Promise((function(e){t.resolveInialized=e})),t}return ve(t,e),t.prototype.addPassiveListener=function(e){this.passiveListeners.add(e)},t.prototype.removePassiveListener=function(e){this.passiveListeners.delete(e)},t.prototype.resetRedirect=function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1},t.prototype.onEvent=function(t){return this.resolveInialized(),this.passiveListeners.forEach((function(e){return e(t)})),e.prototype.onEvent.call(this,t)},t.prototype.initialized=function(){return be(this,void 0,void 0,(function(){return ye(this,(function(e){switch(e.label){case 0:return[4,this.initPromise];case 1:return e.sent(),[2]}}))}))},t}(jn);function Wn(e,t){return qn()._set(Kn(e),t)}function zn(e){return be(this,void 0,void 0,(function(){var t;return ye(this,(function(n){switch(n.label){case 0:return[4,qn()._get(Kn(e))];case 1:if(!(t=n.sent()))return[3,3];else return[4,qn()._remove(Kn(e))];case 2:n.sent(),n.label=3;case 3:return[2,t]}}))}))}function Jn(e,t){var n,i,r=function(e){var t=Xn(e),n=t.link?decodeURIComponent(t.link):void 0,i=Xn(n).link,r=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Xn(r).link||r||i||n||e}(t);if(r.includes("/__/auth/callback")){var s=Xn(r),o=s.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(s.firebaseError)):null,a=null===(i=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],u=a?He(a):null;if(u)return{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null};else return{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:r,postBody:null}}return null}function Gn(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var i=Math.floor(Math.random()*t.length);e.push(t.charAt(i))}return e.join("")}function qn(){return Xe(vn)}function Kn(e){return St("authEvent",e.config.apiKey,e.name)}function Xn(e){if(!(null==e?void 0:e.includes("?")))return{};var t=e.split("?");t[0];var n=t.slice(1);return Object(v.s)(n.join("?"))}var $n,Yn=function(){function e(){this._redirectPersistence=gn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Cn,this._overrideRedirectResult=En}return e.prototype._initialize=function(e){return be(this,void 0,void 0,(function(){var t,n;return ye(this,(function(i){if(t=e._key(),!(n=this.eventManagers.get(t)))n=new Vn(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n);return[2,n]}))}))},e.prototype._openPopup=function(e){Fe(e,"operation-not-supported-in-this-environment")},e.prototype._openRedirect=function(e,t,n,i){return be(this,void 0,void 0,(function(){var r,s,o;return ye(this,(function(a){switch(a.label){case 0:return function(e){var t,n,i,r,s,o,a,u,c,l,h=Dn();Je("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Je(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Je("function"==typeof(null===(s=null===(r=null===(i=null==h?void 0:h.cordova)||void 0===i?void 0:i.plugins)||void 0===r?void 0:r.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Je("function"==typeof(null===(u=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Je("function"==typeof(null===(l=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e),[4,this._initialize(e)];case 1:return[4,(r=a.sent()).initialized()];case 2:return a.sent(),r.resetRedirect(),Tn.clear(),[4,this._originValidation(e)];case 3:return a.sent(),s=function(e,t,n){if(void 0===n)n=null;return{type:t,eventId:n,urlResponse:null,sessionId:Gn(),postBody:null,tenantId:e.tenantId,error:He(e,"no-auth-event")}}(e,n,i),[4,Wn(e,s)];case 4:return a.sent(),[4,Bn(e,s,t)];case 5:return[4,Mn(a.sent())];case 6:return o=a.sent(),[2,xn(e,r,o)]}}))}))},e.prototype._isIframeWebStorageSupported=function(e,t){throw new Error("Method not implemented.")},e.prototype._originValidation=function(e){var t=e._key();if(!this.originValidationPromises[t])this.originValidationPromises[t]=function(e){return be(this,void 0,void 0,(function(){var t,n;return ye(this,(function(i){switch(i.label){case 0:if(t=Dn().BuildInfo,n={},Dt())n.iosBundleId=t.packageName;else if(At())n.androidPackageName=t.packageName;else Fe(e,"operation-not-supported-in-this-environment");return[4,Ln(e,n)];case 1:return i.sent(),[2]}}))}))}(e);return this.originValidationPromises[t]},e.prototype.attachCallbackListeners=function(e,t){var n=this,i=Dn(),r=i.universalLinks,s=i.handleOpenURL,o=i.BuildInfo,a=setTimeout((function(){return be(n,void 0,void 0,(function(){return ye(this,(function(n){switch(n.label){case 0:return[4,zn(e)];case 1:return n.sent(),t.onEvent(Qn()),[2]}}))}))}),500),u=function(i){return be(n,void 0,void 0,(function(){var n,r;return ye(this,(function(s){switch(s.label){case 0:return clearTimeout(a),[4,zn(e)];case 1:if(n=s.sent(),r=null,n&&(null==i?void 0:i.url))r=Jn(n,i.url);return t.onEvent(r||Qn()),[2]}}))}))};if(void 0!==r&&"function"==typeof r.subscribe)r.subscribe(null,u);var c=s,l=o.packageName.toLowerCase()+"://";Dn().handleOpenURL=function(e){return be(n,void 0,void 0,(function(){return ye(this,(function(t){if(e.toLowerCase().startsWith(l))u({url:e});if("function"==typeof c)try{c(e)}catch(n){console.error(n)}return[2]}))}))}},e}();function Qn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:He("no-auth-event")}}function Zn(e){if(void 0===e)e=function(e="[DEFAULT]"){const t=G.get(e);if(!t&&"[DEFAULT]"===e)return ee();if(!t)throw Q.create("no-app",{appName:e});return t}();var t=$(e,"auth");if(t.isInitialized())return t.getImmediate();else return function(e,t){var n=$(e,"auth");if(n.isInitialized()){var i=n.getImmediate(),r=n.getOptions();if(Object(v.g)(r,null!=t?t:{}))return i;else Fe(i,"already-initialized")}return n.initialize({options:t})}(e,{persistence:Le,popupRedirectResolver:Yn})}$n="Cordova",X(new g("auth",(function(e,t){var n=t.options,i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=i.options,o=s.apiKey,a=s.authDomain;return function(e,t){Je(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Je(!(null==a?void 0:a.includes(":")),"argument-error",{appName:e.name});var i={apiKey:o,authDomain:a,clientPlatform:$n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lt($n)},r=new Mt(e,t,i);return function(e,t){var n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Xe);if(null==t?void 0:t.errorMap)e._updateErrorMap(t.errorMap);e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(r,n),r}(i,r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),X(new g("auth-internal",(function(e){return function(e){return new fn(e)}(xt(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),te("@firebase/auth","0.20.11",function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}($n)),te("@firebase/auth","0.20.11","esm5");class ei extends Phaser.State{constructor(){super(),this.isShopOpened=!1}preload(){this.load.atlas("dpad","./assets/images/dpad.png","./assets/json/dpad.json"),this.load.atlasJSONHash("player","./assets/spritesheets/player.png","./assets/json/playerDataMoveUp.json"),this.load.image("gameOverBackground","./assets/images/gameOverBackground.png"),this.load.image("gameBackgroundTile","./assets/images/gameBackgroundTile.png"),this.load.image("retryButton","./assets/images/retryButton.png"),this.load.image("tile","./assets/images/tile.png"),this.load.image("musicoff","./assets/images/musicOff.png"),this.load.image("musicon","./assets/images/musicOn.png"),this.load.image("transparentBackground","./assets/images/transparentBackground.png")}create(){let e=[],t=this.cache.getImage("gameBackgroundTile").width,n=this.cache.getImage("gameBackgroundTile").height;for(let i=0;i<this.game.width;i+=t)for(let t=0;t<this.game.height;t+=n)e.push(this.add.image(i,t,"gameBackgroundTile"));this.backgroundTiles=e,this.addAudioFiles(),this.createPlayButton(),this.createPlayText(),this.createUiButtons(),this.createTitleText(),this.closeButton.visible=!1,this.closeButtonIcon.visible=!1}addAudioFiles(){this.buttonDownAudio=this.add.audio("buttonDown",1,!1),this.buttonHoverAudio=this.add.audio("buttonHover",1,!1)}createPlayButton(){let e=this.add.button(this.world.centerX,this.world.centerY,"guisheet",this._onPlayButton,this,"yellow_button02.png","yellow_button01.png","yellow_button03.png","yellow_button04.png");e.anchor.setTo(.5),e.events.onInputOver.add(this._onInputHover,this),e.events.onKilled.add(this.startGame,this),e.inputEnabled=!0,this.playButton=e,e.scale.setTo(2.2,2.2)}_onPlayButton(){if(!this.isShopOpened)this.backgroundTiles.length=0,this.buttonDownAudio.play(),this.playButton.kill()}_onInputHover(){this.buttonHoverAudio.play("","",1,!1)}startGame(){this.state.start("Main")}createPlayText(){this.textPlay=this.add.text(0,0,"Play",a),this.textPlay.anchor.setTo(.5),this.textPlay.alignIn(this.playButton,Phaser.CENTER,0,0),this.textPlay.stroke="#627577",this.textPlay.strokeThickness=8}createUiButtons(){this.shopButton=this.add.button(this.world.centerX-290,this.world.centerY+150,"guisheet",this._onShopButton,this,"yellow_button07.png","yellow_button08.png","yellow_button09.png","yellow_button10.png"),this.shopButtonIcon=this.add.image(this.world.centerX-290,this.world.centerY+150,"uiicons","cart.png"),this.shopButton.scale.x=this.shopButton.scale.y=this.shopButtonIcon.scale.x=this.shopButtonIcon.scale.y=2,this.shareButton=this.add.button(this.world.centerX-130,this.world.centerY+150,"guisheet",this._onShareButton,this,"yellow_button07.png","yellow_button08.png","yellow_button09.png","yellow_button10.png"),this.shareButtonIcon=this.add.image(this.world.centerX-130,this.world.centerY+150,"uiicons","share2.png"),this.shareButton.scale.x=this.shareButton.scale.y=this.shareButtonIcon.scale.x=this.shareButtonIcon.scale.y=2,this.loginButton=this.add.button(this.world.centerX+40,this.world.centerY+150,"guisheet",this._onLoginButton,this,"yellow_button07.png","yellow_button08.png","yellow_button09.png","yellow_button10.png"),this.loginButtonIcon=this.add.image(this.world.centerX+40,this.world.centerY+150,"uiicons","singleplayer.png"),this.loginButton.scale.x=this.loginButton.scale.y=this.loginButtonIcon.scale.x=this.loginButtonIcon.scale.y=2,this.friendsButton=this.add.button(this.world.centerX+210,this.world.centerY+150,"guisheet",this._onInviteFriendsButton,this,"yellow_button07.png","yellow_button08.png","yellow_button09.png","yellow_button10.png"),this.friendsButtonIcon=this.add.image(this.world.centerX+210,this.world.centerY+150,"uiicons","multiplayer.png"),this.friendsButton.scale.x=this.friendsButton.scale.y=this.friendsButtonIcon.scale.x=this.friendsButtonIcon.scale.y=2,this.closeButton=this.add.button(this.world.width-120,20,"guisheet",this._onCloseButton,this,"yellow_button07.png","yellow_button08.png","yellow_button09.png","yellow_button10.png"),this.closeButtonIcon=this.add.image(this.world.width-120,20,"uiicons","cross.png"),this.closeButton.scale.x=this.closeButton.scale.y=this.closeButtonIcon.scale.x=this.closeButtonIcon.scale.y=2,localStorage.scoreRate=localStorage.scoreRate||1}_onShopButton(){if(!this.isShopOpened)this.state.start("ShopState")}_onShareButton(){if(this.isShopOpened)return;window.plugins.socialsharing.shareWithOptions({message:"Play MoveUp!",subject:"Cool game to be played :-)",files:["www/assets/images/logo.png"],url:"https://doyban.com/moveup"},()=>{alert("Sharing successful.")},()=>{alert("Sharing unsuccessful.")})}_onLoginButton(){if(!this.isShopOpened)this.loginUsingFirebase()}loginUsingFirebase(){const e=Zn();(function(e,t,n){return An(e,t,n)})(e,new Qt).then(()=>function(e,t){return be(this,void 0,void 0,(function(){return ye(this,(function(n){switch(n.label){case 0:return[4,xt(e)._initializationPromise];case 1:return n.sent(),[2,Cn(e,t,!1)]}}))}))}(e)).then(()=>{alert("Authentication successful.")}).catch(()=>{alert("Authentication unsuccessful.")})}_onInviteFriendsButton(){if(this.isShopOpened)return;facebookConnectPlugin.showDialog({method:"apprequests",message:"Play MoveUp with me!"},()=>{alert("Inviting friends successful.")},()=>{alert("Inviting friends unsuccessful.")})}_onCloseButton(){if(this.isShopOpened)this.shop.show(),this.isShopOpened=!1}createTitleText(){this.titleText=this.add.text(.5*this.game.width,.3*this.game.height,"MoveUp",u),this.titleText.anchor.setTo(.5),this.titleText.fontWeight="bold",this.titleText.stroke="#000000",this.titleText.strokeThickness=7}}class ti extends Phaser.State{constructor(){super()}init(){this.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL}addAudioFiles(){this.backgroundMusic=this.add.audio("background",1,!0),this.buttonDownAudio=this.add.audio("buttonDown",1,!1),this.jumpAudio=this.add.audio("buttonJump",1,!1)}create(){if(this.addAudioFiles(),this.backgroundMusic.play(),this.setInitData(),this.tileWidthBackground=this.cache.getImage("gameBackgroundTile").width,this.tileHeightBackground=this.cache.getImage("gameBackgroundTile").height,this.tileWidth=this.cache.getImage("tile").width,this.tileHeight=this.cache.getImage("tile").height,this.createBackground(),this.physics.startSystem(Phaser.Physics.ARCADE),this.platforms=this.add.group(),this.platforms.enableBody=!0,this.platforms.createMultiple(300,"tile"),this.initPlatforms(),this.createPlayer(),this.createScore(),Phaser.Device.iPhone)this.timer=this.time.events.loop(this.platformSpeed-1700,this.addPlatform,this),this.timer.delay=3e3;else this.timer=this.time.events.loop(this.platformSpeed,this.addPlatform,this),this.timer.delay=3e3;if(this.cursors=this.input.keyboard.createCursorKeys(),this.virtualJoyStick=this.game.plugins.add(Phaser.VirtualJoystick),this.createMusicOnButton(),this.createMusicOffButton(),this._checkMusicState(),!Phaser.Device.desktop)this.createVirtualJoystick(),this.createJumpButton(),this.scaleVirtualJoyStickIfNotIphone(),this.dPad.alignBottomLeft(1);this.gameOverPopup=new fe(this)}update(){if(this.player.body.velocity.x=0,this.physics.arcade.collide(this.player,this.platforms),this.cursors.up.isDown&&this.player.body.wasTouching.down)this.playerMoveUp();if(this.cursors.left.isDown)this.playerMovingAnimation(),this.player.body.velocity.x+=-this.movingVelocity;if(this.cursors.right.isDown)this.playerMovingAnimation(),this.player.body.velocity.x+=this.movingVelocity;if(this.player.body.position.y>=this.world.height-this.player.body.height&&!this.isGameOverVisible)this.showAdMobAds(),this.gameOver();if(this.dPad&&this.dPad.isDown)if(this.dPad.direction===Phaser.LEFT)this.playerMovingAnimation(),this.player.body.velocity.x=-this.movingVelocity;else if(this.dPad.direction===Phaser.RIGHT)this.playerMovingAnimation(),this.player.body.velocity.x=this.movingVelocity}setInitData(){if(this.movingVelocity=600,this.jumpingVelocity=1300,this.isGameOverVisible=!1,this.spacing=450,this.platformSpeed=2300,this.world.width>this.world.height&&Phaser.Device.desktop)this.spacing=400,this.platformSpeed-=500;this.score=0}createBackground(){let e=[];for(let t=0;t<=this.game.width;t+=this.tileWidthBackground)for(let n=0;n<=this.game.height;n+=this.tileHeightBackground)e.push(this.add.image(t,n,"gameBackgroundTile"))}createVirtualJoystick(){this.dPad=this.virtualJoyStick.addDPad(0,0,200,"dpad")}createJumpButton(){this.buttonJump=this.virtualJoyStick.addButton(this.world.width-100,this.world.height-100,"dpad","button1-up","button1-up"),this.buttonJump.onDown.add(()=>{if(this.player.body.wasTouching.down)this.playerMoveUp()},this)}scaleVirtualJoyStickIfNotIphone(){if(!Phaser.Device.iPhone)this.buttonJump.sprite.scale.x=1.4,this.buttonJump.sprite.scale.y=1.4,this.dPad.sprite.scale.x=1.5,this.dPad.sprite.scale.y=1.5}playerMoveUp(){this.jumpAudio.play("","",1,!1,!0),this.playerMovingAnimation(),this.player.body.velocity.y=-this.jumpingVelocity}gameOver(){this.gameOverPopup.showGameOver(this.score),this.physics.arcade.isPaused=!0,this.scoreLabel.visible=!1,this.time.removeAll(),localStorage.score=this.score,localStorage.scoreRate=1}showAdMobAds(){let e;document.addEventListener("deviceready",async()=>{e=new admob.InterstitialAd({adUnitId:"ca-app-pub-4865595196880143/7598609878"}),await e.load(),await e.show()},!1),document.addEventListener("admob.ad.dismiss",async()=>{await e.load()})}addTile(e,t){let n=this.platforms.getFirstDead();n.reset(e,t),n.body.immovable=!0,n.body.velocity.y=150,n.checkWorldBounds=!0,n.outOfBoundsKill=!0}addPlatform(e){if(void 0===e)e=-this.tileHeight,this.incrementScore();let t=Math.ceil(this.world.width/this.tileWidth),n=Math.floor(Math.random()*(t-3))+1;for(let i=0;i<t;i++)if(i!=n&&i!=n+1&&i!=n+2&&i!=n+3)this.addTile(i*this.tileWidth,e)}initPlatforms(){let e=this.world.height-this.tileHeight,t=this.tileHeight;for(var n=e;n>t-this.tileHeight;n-=this.spacing)this.addPlatform(n)}createPlayer(){this.player=this.add.sprite(this.world.centerX,this.world.height-(2*this.spacing+3*this.tileHeight),"player",5),this.physics.arcade.enable(this.player),this.player.anchor.setTo(.5,.9),this.player.body.gravity.y=2e3,this.player.body.bounce.y=.1,this.player.body.collideWorldBounds=!0,this.player.animations.add("move")}createScore(){this.scoreLabel=this.add.text(this.world.centerX,100,"0",{font:"100px Arial",fill:"#fff"}),this.scoreLabel.anchor.setTo(.5,.5),this.scoreLabel.align="center",this.scoreLabel.stroke="#627577",this.scoreLabel.strokeThickness=10}incrementScore(){this.score+=parseInt(localStorage.scoreRate),this.scoreLabel.text=this.score}playerMovingAnimation(){this.player.animations.play("move",10)}createMusicOnButton(){this.musicOnButton=this.add.button(this.world.width-120,30,"guisheet",this._onMusicOnButtonDown,this,"yellow_button07.png","yellow_button08.png","yellow_button09.png","yellow_button10.png"),this.musicOnButtonIcon=this.add.image(this.world.width-120,30,"musicon"),this.musicOnButton.scale.x=this.musicOnButton.scale.y=this.musicOnButtonIcon.scale.x=this.musicOnButtonIcon.scale.y=2}createMusicOffButton(){this.musicOffButton=this.add.button(this.world.width-120,30,"guisheet",this._onMusicOffButtonDown,this,"yellow_button07.png","yellow_button08.png","yellow_button09.png","yellow_button10.png"),this.musicOffButtonIcon=this.add.image(this.world.width-120,30,"musicoff"),this.musicOffButton.scale.x=this.musicOffButton.scale.y=this.musicOffButtonIcon.scale.x=this.musicOffButtonIcon.scale.y=2,this.musicOffButton.visible=!1,this.musicOffButtonIcon.visible=!1}_onMusicOnButtonDown(){this.sound.mute=!0,this.musicOnButton.visible=!1,this.musicOnButtonIcon.visible=!1,this.musicOffButton.visible=!0,this.musicOffButtonIcon.visible=!0}_onMusicOffButtonDown(){this.sound.mute=!1,this.musicOnButton.visible=!0,this.musicOnButtonIcon.visible=!0,this.musicOffButton.visible=!1,this.musicOffButtonIcon.visible=!1}_checkMusicState(){if(this.sound.mute)this._onMusicOnButtonDown();else this._onMusicOffButtonDown()}}class ni{constructor(e,t,n){this._game=e,this.backgroundLayers=[],this.multiplier=n,this.position=t,this.visible=!1,this._build()}_build(){this.createBackground(),this.createScoreText(),this.createScoreXText(),this.createScoreMultiplierText()}createBackground(){if(this.background=this._game.add.button(this.position.x,this.position.y,"guisheet",this.onItemClicked,this,"yellow_button07.png","yellow_button07.png","yellow_button07.png","yellow_button07.png"),devicePixelRatio>3)this.background.scale.setTo(3.2,3);else if(devicePixelRatio<2.1)this.background.scale.setTo(3,2.85);else this.background.scale.setTo(3,2.85);this.background.anchor.setTo(.5),this.backgroundLayers.push(this.background)}onItemClicked(){const e=this;store.refresh(),store.register({id:"scorex"+this.multiplier,alias:"Score "+this.multiplier,type:store.CONSUMABLE}),store.order("scorex"+this.multiplier),store.refresh(),store.when("scorex"+this.multiplier).approved((function(t){t.finish(),store.refresh(),localStorage.scoreRate=this.multiplier,e.game.state.start("ShopState")}))}createScoreText(){this.gameScoreText=this._game.add.text(0,-10,"Score",h),this.gameScoreText.anchor.setTo(.5),this.gameScoreText.stroke="#627577",this.gameScoreText.strokeThickness=2.2,this.background.addChild(this.gameScoreText)}createScoreXText(){this.gameScoreText.autoRound=!0,this.gameScoreText.lineSpacing=5,this.gameScoreTextX=this._game.add.text(-8,10,"x",h),this.gameScoreTextX.anchor.setTo(.5),this.gameScoreTextX.stroke="#627577",this.gameScoreTextX.strokeThickness=3,this.background.addChild(this.gameScoreTextX)}createScoreMultiplierText(){this.gameScoreTextX=this._game.add.text(8,10,this.multiplier,d),this.gameScoreTextX.anchor.setTo(.5),this.gameScoreTextX.stroke="#627577",this.gameScoreTextX.strokeThickness=3,this.background.addChild(this.gameScoreTextX)}show(e=!1){for(let t=0;t<this.backgroundLayers.length;t++){this.backgroundLayers[t].visible=e}}}class ii extends Phaser.State{constructor(){super(),this.backgroundLayers=[]}create(){this.createBackground(),this.createCloseButton(),this.createShopItems(),this.show(!0)}createBackground(){let e=[];this.tileHeightBackground=this.cache.getImage("gameBackgroundTile").height,this.tileWidthBackground=this.cache.getImage("gameBackgroundTile").width;for(let t=0;t<=this.game.width;t+=this.tileWidthBackground)for(let n=0;n<=this.game.height;n+=this.tileHeightBackground)e.push(this.add.image(t,n,"gameBackgroundTile"))}createCloseButton(){this.closeButton=this.add.button(this.world.width-120,20,"guisheet",this._onCloseButton,this,"yellow_button07.png","yellow_button08.png","yellow_button09.png","yellow_button10.png"),this.closeButtonIcon=this.add.image(this.world.width-120,20,"uiicons","cross.png"),this.closeButton.scale.x=this.closeButton.scale.y=this.closeButtonIcon.scale.x=this.closeButtonIcon.scale.y=2}createShopItems(e=4){let t=[[-100,-100],[100,-100],[-100,100],[100,100]],n=[2,3,4,6];for(let i=0;i<e;i++)this.backgroundLayers.push(new ni(this,{x:this.world.centerX+t[i][0],y:this.world.centerY+t[i][1]},n[i]))}show(e=!1){for(let t=0;t<this.backgroundLayers.length;t++){const n=this.backgroundLayers[t];if(n instanceof ni)n.show(e);else n.visible=e}}_onCloseButton(){this.state.start("Preload")}}class ri extends Phaser.Game{constructor(){super(r,i,Phaser.CANVAS,"content",null,!0);ee({apiKey:"AIzaSyBAIOhzJ5qygFDxxURHRRxdyb9hpEjYdi4",authDomain:"moveup-fd592.firebaseapp.com",projectId:"moveup-fd592",storageBucket:"moveup-fd592.appspot.com",messagingSenderId:"913523773880",appId:"1:913523773880:web:44ddca692ec36a8cd7bf4d",measurementId:"G-8V8K3WE4R3"}),this.state.add("Boot",de),this.state.add("Main",ti),this.state.add("Preload",ei),this.state.add("ShopState",ii),this.state.start("Boot")}}window.game=new ri}]);